"use strict";var globalThis=globalThis||{};globalThis.codama=(()=>{var ms=Object.create;var Ke=Object.defineProperty;var Ns=Object.getOwnPropertyDescriptor;var vs=Object.getOwnPropertyNames;var gs=Object.getPrototypeOf,Ts=Object.prototype.hasOwnProperty;var hs=(t,e,n)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),As=(t,e)=>{for(var n in e)Ke(t,n,{get:e[n],enumerable:!0})},di=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of vs(e))!Ts.call(t,u)&&u!==n&&Ke(t,u,{get:()=>e[u],enumerable:!(r=Ns(e,u))||r.enumerable});return t};var Vs=(t,e,n)=>(n=t!=null?ms(gs(t)):{},di(e||!t||!t.__esModule?Ke(n,"default",{value:t,enumerable:!0}):n,t)),Ss=t=>di(Ke({},"__esModule",{value:!0}),t);var He=(t,e,n)=>hs(t,typeof e!="symbol"?e+"":e,n);var Ui=T((ql,ji)=>{"use strict";var zt,h,Li={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},pn;function Ne(t){throw{name:"SyntaxError",message:t,at:zt,text:pn}}function E(t){return t&&t!==h&&Ne("Expected '"+t+"' instead of '"+h+"'"),h=pn.charAt(zt),zt+=1,h}function Mi(){var t,e="";for(h==="-"&&(e="-",E("-"));h>="0"&&h<="9";)e+=h,E();if(h===".")for(e+=".";E()&&h>="0"&&h<="9";)e+=h;if(h==="e"||h==="E")for(e+=h,E(),(h==="-"||h==="+")&&(e+=h,E());h>="0"&&h<="9";)e+=h,E();return t=Number(e),isFinite(t)||Ne("Bad number"),t}function $i(){var t,e,n="",r;if(h==='"')for(;E();){if(h==='"')return E(),n;if(h==="\\")if(E(),h==="u"){for(r=0,e=0;e<4&&(t=parseInt(E(),16),!!isFinite(t));e+=1)r=r*16+t;n+=String.fromCharCode(r)}else if(typeof Li[h]=="string")n+=Li[h];else break;else n+=h}Ne("Bad string")}function ue(){for(;h&&h<=" ";)E()}function tu(){switch(h){case"t":return E("t"),E("r"),E("u"),E("e"),!0;case"f":return E("f"),E("a"),E("l"),E("s"),E("e"),!1;case"n":return E("n"),E("u"),E("l"),E("l"),null;default:Ne("Unexpected '"+h+"'")}}function ru(){var t=[];if(h==="["){if(E("["),ue(),h==="]")return E("]"),t;for(;h;){if(t.push(qt()),ue(),h==="]")return E("]"),t;E(","),ue()}}Ne("Bad array")}function nu(){var t,e={};if(h==="{"){if(E("{"),ue(),h==="}")return E("}"),e;for(;h;){if(t=$i(),ue(),E(":"),Object.prototype.hasOwnProperty.call(e,t)&&Ne('Duplicate key "'+t+'"'),e[t]=qt(),ue(),h==="}")return E("}"),e;E(","),ue()}}Ne("Bad object")}function qt(){switch(ue(),h){case"{":return nu();case"[":return ru();case'"':return $i();case"-":return Mi();default:return h>="0"&&h<="9"?Mi():tu()}}ji.exports=function(t,e){var n;return pn=t,zt=0,h=" ",n=qt(),ue(),h&&Ne("Syntax error"),typeof e=="function"?function r(u,i){var s,a,o=u[i];if(o&&typeof o=="object")for(s in qt)Object.prototype.hasOwnProperty.call(o,s)&&(a=r(o,s),typeof a>"u"?delete o[s]:o[s]=a);return e.call(u,i,o)}({"":n},""):n}});var qi=T((Bl,zi)=>{"use strict";var yn=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Y,Bt,iu={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Ve;function mn(t){return yn.lastIndex=0,yn.test(t)?'"'+t.replace(yn,function(e){var n=iu[e];return typeof n=="string"?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function Gt(t,e){var n,r,u,i,s=Y,a,o=e[t];switch(o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(t)),typeof Ve=="function"&&(o=Ve.call(e,t,o)),typeof o){case"string":return mn(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(Y+=Bt,a=[],Object.prototype.toString.apply(o)==="[object Array]"){for(i=o.length,n=0;n<i;n+=1)a[n]=Gt(n,o)||"null";return u=a.length===0?"[]":Y?`[
`+Y+a.join(`,
`+Y)+`
`+s+"]":"["+a.join(",")+"]",Y=s,u}if(Ve&&typeof Ve=="object")for(i=Ve.length,n=0;n<i;n+=1)r=Ve[n],typeof r=="string"&&(u=Gt(r,o),u&&a.push(mn(r)+(Y?": ":":")+u));else for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(u=Gt(r,o),u&&a.push(mn(r)+(Y?": ":":")+u));return u=a.length===0?"{}":Y?`{
`+Y+a.join(`,
`+Y)+`
`+s+"}":"{"+a.join(",")+"}",Y=s,u;default:}}zi.exports=function(t,e,n){var r;if(Y="",Bt="",typeof n=="number")for(r=0;r<n;r+=1)Bt+=" ";else typeof n=="string"&&(Bt=n);if(Ve=e,e&&typeof e!="function"&&(typeof e!="object"||typeof e.length!="number"))throw new Error("JSON.stringify");return Gt("",{"":t})}});var Bi=T(Nn=>{"use strict";Nn.parse=Ui();Nn.stringify=qi()});var Ki=T((Kl,Gi)=>{"use strict";var ou={}.toString;Gi.exports=Array.isArray||function(t){return ou.call(t)=="[object Array]"}});var vn=T((Hl,Wi)=>{"use strict";var Hi=Object.prototype.toString;Wi.exports=function(e){var n=Hi.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Hi.call(e.callee)==="[object Function]"),r}});var no=T((Wl,ro)=>{"use strict";var to;Object.keys||(yt=Object.prototype.hasOwnProperty,gn=Object.prototype.toString,Ji=vn(),Tn=Object.prototype.propertyIsEnumerable,Yi=!Tn.call({toString:null},"toString"),Zi=Tn.call(function(){},"prototype"),mt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Kt=function(t){var e=t.constructor;return e&&e.prototype===t},Xi={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Qi=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!Xi["$"+t]&&yt.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Kt(window[t])}catch{return!0}}catch{return!0}return!1}(),eo=function(t){if(typeof window>"u"||!Qi)return Kt(t);try{return Kt(t)}catch{return!1}},to=function(e){var n=e!==null&&typeof e=="object",r=gn.call(e)==="[object Function]",u=Ji(e),i=n&&gn.call(e)==="[object String]",s=[];if(!n&&!r&&!u)throw new TypeError("Object.keys called on a non-object");var a=Zi&&r;if(i&&e.length>0&&!yt.call(e,0))for(var o=0;o<e.length;++o)s.push(String(o));if(u&&e.length>0)for(var c=0;c<e.length;++c)s.push(String(c));else for(var l in e)!(a&&l==="prototype")&&yt.call(e,l)&&s.push(String(l));if(Yi)for(var d=eo(e),f=0;f<mt.length;++f)!(d&&mt[f]==="constructor")&&yt.call(e,mt[f])&&s.push(mt[f]);return s});var yt,gn,Ji,Tn,Yi,Zi,mt,Kt,Xi,Qi,eo;ro.exports=to});var so=T((Jl,ao)=>{"use strict";var au=Array.prototype.slice,su=vn(),io=Object.keys,Ht=io?function(e){return io(e)}:no(),oo=Object.keys;Ht.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return su(r)?oo(au.call(r)):oo(r)})}else Object.keys=Ht;return Object.keys||Ht};ao.exports=Ht});var co=T((Yl,uo)=>{"use strict";uo.exports=Object});var hn=T((Zl,lo)=>{"use strict";lo.exports=Error});var An=T((Xl,fo)=>{"use strict";fo.exports=EvalError});var Vn=T((Ql,po)=>{"use strict";po.exports=RangeError});var Sn=T((ef,yo)=>{"use strict";yo.exports=ReferenceError});var Wt=T((tf,mo)=>{"use strict";mo.exports=SyntaxError});var Se=T((rf,No)=>{"use strict";No.exports=TypeError});var On=T((nf,vo)=>{"use strict";vo.exports=URIError});var En=T((of,go)=>{"use strict";go.exports=Math.abs});var bn=T((af,To)=>{"use strict";To.exports=Math.floor});var In=T((sf,ho)=>{"use strict";ho.exports=Math.max});var _n=T((uf,Ao)=>{"use strict";Ao.exports=Math.min});var Dn=T((cf,Vo)=>{"use strict";Vo.exports=Math.pow});var Oo=T((lf,So)=>{"use strict";So.exports=Object.getOwnPropertyDescriptor});var xe=T((ff,Eo)=>{"use strict";var Jt=Oo();if(Jt)try{Jt([],"length")}catch{Jt=null}Eo.exports=Jt});var we=T((df,bo)=>{"use strict";var Yt=Object.defineProperty||!1;if(Yt)try{Yt({},"a",{value:1})}catch{Yt=!1}bo.exports=Yt});var _o=T((pf,Io)=>{"use strict";Io.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var u=42;e[n]=u;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==u||a.enumerable!==!0)return!1}return!0}});var Rn=T((yf,Ro)=>{"use strict";var Do=typeof Symbol<"u"&&Symbol,uu=_o();Ro.exports=function(){return typeof Do!="function"||typeof Symbol!="function"||typeof Do("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:uu()}});var Co=T((mf,Po)=>{"use strict";var cu="Function.prototype.bind called on incompatible ",lu=Object.prototype.toString,fu=Math.max,du="[object Function]",ko=function(e,n){for(var r=[],u=0;u<e.length;u+=1)r[u]=e[u];for(var i=0;i<n.length;i+=1)r[i+e.length]=n[i];return r},pu=function(e,n){for(var r=[],u=n||0,i=0;u<e.length;u+=1,i+=1)r[i]=e[u];return r},yu=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n};Po.exports=function(e){var n=this;if(typeof n!="function"||lu.apply(n)!==du)throw new TypeError(cu+n);for(var r=pu(arguments,1),u,i=function(){if(this instanceof u){var l=n.apply(this,ko(r,arguments));return Object(l)===l?l:this}return n.apply(e,ko(r,arguments))},s=fu(0,n.length-r.length),a=[],o=0;o<s;o++)a[o]="$"+o;if(u=Function("binder","return function ("+yu(a,",")+"){ return binder.apply(this,arguments); }")(i),n.prototype){var c=function(){};c.prototype=n.prototype,u.prototype=new c,c.prototype=null}return u}});var ce=T((Nf,xo)=>{"use strict";var mu=Co();xo.exports=Function.prototype.bind||mu});var Zt=T((vf,wo)=>{"use strict";wo.exports=Function.prototype.call});var Xt=T((gf,Fo)=>{"use strict";Fo.exports=Function.prototype.apply});var Mo=T((Tf,Lo)=>{"use strict";Lo.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var kn=T((hf,$o)=>{"use strict";var Nu=ce(),vu=Xt(),gu=Zt(),Tu=Mo();$o.exports=Tu||Nu.call(gu,vu)});var Pn=T((Af,jo)=>{"use strict";var hu=ce(),Au=Se(),Vu=Zt(),Su=kn();jo.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new Au("a function is required");return Su(hu,Vu,e)}});var xn=T((Vf,Go)=>{"use strict";var Ou=Pn(),Uo=xe(),qo;try{qo=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var Cn=!!qo&&Uo&&Uo(Object.prototype,"__proto__"),Bo=Object,zo=Bo.getPrototypeOf;Go.exports=Cn&&typeof Cn.get=="function"?Ou([Cn.get]):typeof zo=="function"?function(e){return zo(e==null?e:Bo(e))}:!1});var wn=T((Sf,Ko)=>{"use strict";var Eu=Function.prototype.call,bu=Object.prototype.hasOwnProperty,Iu=ce();Ko.exports=Iu.call(Eu,bu)});var ea=T((Of,Qo)=>{"use strict";var O,Yo=co(),_u=hn(),Du=An(),Ru=Vn(),ku=Sn(),$e=Wt(),Me=Se(),Pu=On(),Cu=En(),xu=bn(),wu=In(),Fu=_n(),Lu=Dn(),Zo=Function,Fn=function(t){try{return Zo('"use strict"; return ('+t+").constructor;")()}catch{}},Nt=xe(),Mu=we(),Ln=function(){throw new Me},$u=Nt?function(){try{return arguments.callee,Ln}catch{try{return Nt(arguments,"callee").get}catch{return Ln}}}():Ln,Fe=Rn()(),ju=xn(),L=typeof Reflect=="function"&&Reflect.getPrototypeOf||Yo.getPrototypeOf||ju,Xo=Xt(),vt=Zt(),Le={},Uu=typeof Uint8Array>"u"||!L?O:L(Uint8Array),Oe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?O:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?O:ArrayBuffer,"%ArrayIteratorPrototype%":Fe&&L?L([][Symbol.iterator]()):O,"%AsyncFromSyncIteratorPrototype%":O,"%AsyncFunction%":Le,"%AsyncGenerator%":Le,"%AsyncGeneratorFunction%":Le,"%AsyncIteratorPrototype%":Le,"%Atomics%":typeof Atomics>"u"?O:Atomics,"%BigInt%":typeof BigInt>"u"?O:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?O:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?O:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?O:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":_u,"%eval%":eval,"%EvalError%":Du,"%Float32Array%":typeof Float32Array>"u"?O:Float32Array,"%Float64Array%":typeof Float64Array>"u"?O:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?O:FinalizationRegistry,"%Function%":Zo,"%GeneratorFunction%":Le,"%Int8Array%":typeof Int8Array>"u"?O:Int8Array,"%Int16Array%":typeof Int16Array>"u"?O:Int16Array,"%Int32Array%":typeof Int32Array>"u"?O:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Fe&&L?L(L([][Symbol.iterator]())):O,"%JSON%":typeof JSON=="object"?JSON:O,"%Map%":typeof Map>"u"?O:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Fe||!L?O:L(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Yo,"%Object.getOwnPropertyDescriptor%":Nt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?O:Promise,"%Proxy%":typeof Proxy>"u"?O:Proxy,"%RangeError%":Ru,"%ReferenceError%":ku,"%Reflect%":typeof Reflect>"u"?O:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?O:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Fe||!L?O:L(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?O:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Fe&&L?L(""[Symbol.iterator]()):O,"%Symbol%":Fe?Symbol:O,"%SyntaxError%":$e,"%ThrowTypeError%":$u,"%TypedArray%":Uu,"%TypeError%":Me,"%Uint8Array%":typeof Uint8Array>"u"?O:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?O:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?O:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?O:Uint32Array,"%URIError%":Pu,"%WeakMap%":typeof WeakMap>"u"?O:WeakMap,"%WeakRef%":typeof WeakRef>"u"?O:WeakRef,"%WeakSet%":typeof WeakSet>"u"?O:WeakSet,"%Function.prototype.call%":vt,"%Function.prototype.apply%":Xo,"%Object.defineProperty%":Mu,"%Math.abs%":Cu,"%Math.floor%":xu,"%Math.max%":wu,"%Math.min%":Fu,"%Math.pow%":Lu};if(L)try{null.error}catch(t){Ho=L(L(t)),Oe["%Error.prototype%"]=Ho}var Ho,zu=function t(e){var n;if(e==="%AsyncFunction%")n=Fn("async function () {}");else if(e==="%GeneratorFunction%")n=Fn("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=Fn("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var u=t("%AsyncGenerator%");u&&L&&(n=L(u.prototype))}return Oe[e]=n,n},Wo={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},gt=ce(),Qt=wn(),qu=gt.call(vt,Array.prototype.concat),Bu=gt.call(Xo,Array.prototype.splice),Jo=gt.call(vt,String.prototype.replace),er=gt.call(vt,String.prototype.slice),Gu=gt.call(vt,RegExp.prototype.exec),Ku=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Hu=/\\(\\)?/g,Wu=function(e){var n=er(e,0,1),r=er(e,-1);if(n==="%"&&r!=="%")throw new $e("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new $e("invalid intrinsic syntax, expected opening `%`");var u=[];return Jo(e,Ku,function(i,s,a,o){u[u.length]=a?Jo(o,Hu,"$1"):s||i}),u},Ju=function(e,n){var r=e,u;if(Qt(Wo,r)&&(u=Wo[r],r="%"+u[0]+"%"),Qt(Oe,r)){var i=Oe[r];if(i===Le&&(i=zu(r)),typeof i>"u"&&!n)throw new Me("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:u,name:r,value:i}}throw new $e("intrinsic "+e+" does not exist!")};Qo.exports=function(e,n){if(typeof e!="string"||e.length===0)throw new Me("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Me('"allowMissing" argument must be a boolean');if(Gu(/^%?[^%]*%?$/,e)===null)throw new $e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Wu(e),u=r.length>0?r[0]:"",i=Ju("%"+u+"%",n),s=i.name,a=i.value,o=!1,c=i.alias;c&&(u=c[0],Bu(r,qu([0,1],c)));for(var l=1,d=!0;l<r.length;l+=1){var f=r[l],m=er(f,0,1),v=er(f,-1);if((m==='"'||m==="'"||m==="`"||v==='"'||v==="'"||v==="`")&&m!==v)throw new $e("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(o=!0),u+="."+f,s="%"+u+"%",Qt(Oe,s))a=Oe[s];else if(a!=null){if(!(f in a)){if(!n)throw new Me("base intrinsic for "+e+" exists, but the property is not available.");return}if(Nt&&l+1>=r.length){var A=Nt(a,f);d=!!A,d&&"get"in A&&!("originalValue"in A.get)?a=A.get:a=a[f]}else d=Qt(a,f),a=a[f];d&&!o&&(Oe[s]=a)}}return a}});var ia=T((Ef,na)=>{"use strict";var ta=we(),Yu=Wt(),je=Se(),ra=xe();na.exports=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new je("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new je("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new je("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new je("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new je("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new je("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,o=!!ra&&ra(e,n);if(ta)ta(e,n,{configurable:s===null&&o?o.configurable:!s,enumerable:u===null&&o?o.enumerable:!u,value:r,writable:i===null&&o?o.writable:!i});else if(a||!u&&!i&&!s)e[n]=r;else throw new Yu("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var sa=T((bf,aa)=>{"use strict";var Mn=we(),oa=function(){return!!Mn};oa.hasArrayLengthDefineBug=function(){if(!Mn)return null;try{return Mn([],"length",{value:1}).length!==1}catch{return!0}};aa.exports=oa});var da=T((If,fa)=>{"use strict";var Zu=ea(),ua=ia(),Xu=sa()(),ca=xe(),la=Se(),Qu=Zu("%Math.floor%");fa.exports=function(e,n){if(typeof e!="function")throw new la("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||Qu(n)!==n)throw new la("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],u=!0,i=!0;if("length"in e&&ca){var s=ca(e,"length");s&&!s.configurable&&(u=!1),s&&!s.writable&&(i=!1)}return(u||i||!r)&&(Xu?ua(e,"length",n,!0,!0):ua(e,"length",n)),e}});var ya=T((_f,pa)=>{"use strict";var ec=ce(),tc=Xt(),rc=kn();pa.exports=function(){return rc(ec,tc,arguments)}});var va=T((Df,tr)=>{"use strict";var nc=da(),ma=we(),ic=Pn(),Na=ya();tr.exports=function(e){var n=ic(arguments),r=e.length-(arguments.length-1);return nc(n,1+(r>0?r:0),!0)};ma?ma(tr.exports,"apply",{value:Na}):tr.exports.apply=Na});var $n=T((Rf,ga)=>{"use strict";ga.exports=Object});var ha=T((kf,Ta)=>{"use strict";Ta.exports=Math.round});var Va=T((Pf,Aa)=>{"use strict";Aa.exports=Number.isNaN||function(e){return e!==e}});var Oa=T((Cf,Sa)=>{"use strict";var oc=Va();Sa.exports=function(e){return oc(e)||e===0?e:e<0?-1:1}});var jn=T((xf,Ea)=>{"use strict";Ea.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var Un=T((wf,ba)=>{"use strict";var ac=$n();ba.exports=ac.getPrototypeOf||null});var ka=T((Ff,Ra)=>{"use strict";var Ia=jn(),_a=Un(),Da=xn();Ra.exports=Ia?function(e){return Ia(e)}:_a?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return _a(e)}:Da?function(e){return Da(e)}:null});var zn=T((Lf,Pa)=>{"use strict";Pa.exports=Function.prototype.apply});var rr=T((Mf,Ca)=>{"use strict";Ca.exports=Function.prototype.call});var ja=T(($f,$a)=>{"use strict";var S,sc=$n(),uc=hn(),cc=An(),lc=Vn(),fc=Sn(),Be=Wt(),qe=Se(),dc=On(),pc=En(),yc=bn(),mc=In(),Nc=_n(),vc=Dn(),gc=ha(),Tc=Oa(),La=Function,qn=function(t){try{return La('"use strict"; return ('+t+").constructor;")()}catch{}},Tt=xe(),hc=we(),Bn=function(){throw new qe},Ac=Tt?function(){try{return arguments.callee,Bn}catch{try{return Tt(arguments,"callee").get}catch{return Bn}}}():Bn,Ue=Rn()(),M=ka(),Vc=Un(),Sc=jn(),Ma=zn(),ht=rr(),ze={},Oc=typeof Uint8Array>"u"||!M?S:M(Uint8Array),Ee={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?S:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?S:ArrayBuffer,"%ArrayIteratorPrototype%":Ue&&M?M([][Symbol.iterator]()):S,"%AsyncFromSyncIteratorPrototype%":S,"%AsyncFunction%":ze,"%AsyncGenerator%":ze,"%AsyncGeneratorFunction%":ze,"%AsyncIteratorPrototype%":ze,"%Atomics%":typeof Atomics>"u"?S:Atomics,"%BigInt%":typeof BigInt>"u"?S:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?S:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?S:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?S:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":uc,"%eval%":eval,"%EvalError%":cc,"%Float16Array%":typeof Float16Array>"u"?S:Float16Array,"%Float32Array%":typeof Float32Array>"u"?S:Float32Array,"%Float64Array%":typeof Float64Array>"u"?S:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?S:FinalizationRegistry,"%Function%":La,"%GeneratorFunction%":ze,"%Int8Array%":typeof Int8Array>"u"?S:Int8Array,"%Int16Array%":typeof Int16Array>"u"?S:Int16Array,"%Int32Array%":typeof Int32Array>"u"?S:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ue&&M?M(M([][Symbol.iterator]())):S,"%JSON%":typeof JSON=="object"?JSON:S,"%Map%":typeof Map>"u"?S:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ue||!M?S:M(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":sc,"%Object.getOwnPropertyDescriptor%":Tt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?S:Promise,"%Proxy%":typeof Proxy>"u"?S:Proxy,"%RangeError%":lc,"%ReferenceError%":fc,"%Reflect%":typeof Reflect>"u"?S:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?S:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ue||!M?S:M(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?S:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ue&&M?M(""[Symbol.iterator]()):S,"%Symbol%":Ue?Symbol:S,"%SyntaxError%":Be,"%ThrowTypeError%":Ac,"%TypedArray%":Oc,"%TypeError%":qe,"%Uint8Array%":typeof Uint8Array>"u"?S:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?S:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?S:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?S:Uint32Array,"%URIError%":dc,"%WeakMap%":typeof WeakMap>"u"?S:WeakMap,"%WeakRef%":typeof WeakRef>"u"?S:WeakRef,"%WeakSet%":typeof WeakSet>"u"?S:WeakSet,"%Function.prototype.call%":ht,"%Function.prototype.apply%":Ma,"%Object.defineProperty%":hc,"%Object.getPrototypeOf%":Vc,"%Math.abs%":pc,"%Math.floor%":yc,"%Math.max%":mc,"%Math.min%":Nc,"%Math.pow%":vc,"%Math.round%":gc,"%Math.sign%":Tc,"%Reflect.getPrototypeOf%":Sc};if(M)try{null.error}catch(t){xa=M(M(t)),Ee["%Error.prototype%"]=xa}var xa,Ec=function t(e){var n;if(e==="%AsyncFunction%")n=qn("async function () {}");else if(e==="%GeneratorFunction%")n=qn("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=qn("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var u=t("%AsyncGenerator%");u&&M&&(n=M(u.prototype))}return Ee[e]=n,n},wa={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},At=ce(),nr=wn(),bc=At.call(ht,Array.prototype.concat),Ic=At.call(Ma,Array.prototype.splice),Fa=At.call(ht,String.prototype.replace),ir=At.call(ht,String.prototype.slice),_c=At.call(ht,RegExp.prototype.exec),Dc=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rc=/\\(\\)?/g,kc=function(e){var n=ir(e,0,1),r=ir(e,-1);if(n==="%"&&r!=="%")throw new Be("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Be("invalid intrinsic syntax, expected opening `%`");var u=[];return Fa(e,Dc,function(i,s,a,o){u[u.length]=a?Fa(o,Rc,"$1"):s||i}),u},Pc=function(e,n){var r=e,u;if(nr(wa,r)&&(u=wa[r],r="%"+u[0]+"%"),nr(Ee,r)){var i=Ee[r];if(i===ze&&(i=Ec(r)),typeof i>"u"&&!n)throw new qe("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:u,name:r,value:i}}throw new Be("intrinsic "+e+" does not exist!")};$a.exports=function(e,n){if(typeof e!="string"||e.length===0)throw new qe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new qe('"allowMissing" argument must be a boolean');if(_c(/^%?[^%]*%?$/,e)===null)throw new Be("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=kc(e),u=r.length>0?r[0]:"",i=Pc("%"+u+"%",n),s=i.name,a=i.value,o=!1,c=i.alias;c&&(u=c[0],Ic(r,bc([0,1],c)));for(var l=1,d=!0;l<r.length;l+=1){var f=r[l],m=ir(f,0,1),v=ir(f,-1);if((m==='"'||m==="'"||m==="`"||v==='"'||v==="'"||v==="`")&&m!==v)throw new Be("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(o=!0),u+="."+f,s="%"+u+"%",nr(Ee,s))a=Ee[s];else if(a!=null){if(!(f in a)){if(!n)throw new qe("base intrinsic for "+e+" exists, but the property is not available.");return}if(Tt&&l+1>=r.length){var A=Tt(a,f);d=!!A,d&&"get"in A&&!("originalValue"in A.get)?a=A.get:a=a[f]}else d=nr(a,f),a=a[f];d&&!o&&(Ee[s]=a)}}return a}});var za=T((jf,Ua)=>{"use strict";Ua.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var Ba=T((Uf,qa)=>{"use strict";var Cc=ce(),xc=zn(),wc=rr(),Fc=za();qa.exports=Fc||Cc.call(wc,xc)});var Ka=T((zf,Ga)=>{"use strict";var Lc=ce(),Mc=Se(),$c=rr(),jc=Ba();Ga.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new Mc("a function is required");return jc(Lc,$c,e)}});var Ya=T((qf,Ja)=>{"use strict";var Ha=ja(),Wa=Ka(),Uc=Wa([Ha("%String.prototype.indexOf%")]);Ja.exports=function(e,n){var r=Ha(e,!!n);return typeof r=="function"&&Uc(e,".prototype.")>-1?Wa([r]):r}});var es=T((Bf,Qa)=>{"use strict";var or=(typeof JSON<"u"?JSON:Bi()).stringify,zc=Ki(),qc=so(),Bc=va(),ar=Ya(),Gc=ar("Array.prototype.join"),Za=ar("Array.prototype.indexOf"),Kc=ar("Array.prototype.splice"),Hc=ar("Array.prototype.sort"),Xa=function(e,n){for(var r="",u=0;u<e;u+=1)r+=n;return r},Wc=function(t,e,n){return n};Qa.exports=function(e){var n=arguments.length>1?arguments[1]:void 0,r=n&&n.space||"";typeof r=="number"&&(r=Xa(r," "));var u=!!n&&typeof n.cycles=="boolean"&&n.cycles,i=n&&n.replacer?Bc(n.replacer):Wc;if(n&&typeof n.collapseEmpty<"u"&&typeof n.collapseEmpty!="boolean")throw new TypeError("`collapseEmpty` must be a boolean, if provided");var s=!!n&&n.collapseEmpty,a=typeof n=="function"?n:n&&n.cmp,o=a&&function(l){var d=a.length>2&&function(m){return l[m]};return function(f,m){return a({key:f,value:l[f]},{key:m,value:l[m]},d?{__proto__:null,get:d}:void 0)}},c=[];return function l(d,f,m,v){var A=r?`
`+Xa(v,r):"",k=r?": ":":";if(m&&m.toJSON&&typeof m.toJSON=="function"&&(m=m.toJSON()),m=i(d,f,m),m!==void 0){if(typeof m!="object"||m===null)return or(m);var X=function(fi,pr){return s&&fi.length===0?pr:(pr==="[]"?"[":"{")+Gc(fi,",")+A+(pr==="[]"?"]":"}")};if(zc(m)){for(var K=[],$=0;$<m.length;$++){var fr=l(m,$,m[$],v+1)||or(null);K[K.length]=A+r+fr}return X(K,"[]")}if(Za(c,m)!==-1){if(u)return or("__cycle__");throw new TypeError("Converting circular structure to JSON")}else c[c.length]=m;for(var Ot=Hc(qc(m),o&&o(m)),K=[],$=0;$<Ot.length;$++){var f=Ot[$],dr=l(m,f,m[f],v+1);if(dr){var ys=or(f)+k+dr;K[K.length]=A+r+ys}}return Kc(c,Za(c,m),1),X(K,"{}")}}({"":e},"",e,0)}});var Cl={};As(Cl,{CODAMA_ERROR__ANCHOR__ACCOUNT_TYPE_MISSING:()=>Ai,CODAMA_ERROR__ANCHOR__ARGUMENT_TYPE_MISSING:()=>Vi,CODAMA_ERROR__ANCHOR__PROGRAM_ID_KIND_UNIMPLEMENTED:()=>Ei,CODAMA_ERROR__ANCHOR__SEED_KIND_UNIMPLEMENTED:()=>Oi,CODAMA_ERROR__ANCHOR__TYPE_PATH_MISSING:()=>Si,CODAMA_ERROR__ANCHOR__UNRECOGNIZED_IDL_TYPE:()=>hi,CODAMA_ERROR__DISCRIMINATOR_FIELD_HAS_NO_DEFAULT_VALUE:()=>gi,CODAMA_ERROR__DISCRIMINATOR_FIELD_NOT_FOUND:()=>vi,CODAMA_ERROR__ENUM_VARIANT_NOT_FOUND:()=>Ni,CODAMA_ERROR__LINKED_NODE_NOT_FOUND:()=>_t,CODAMA_ERROR__NODE_FILESYSTEM_FUNCTION_UNAVAILABLE:()=>pi,CODAMA_ERROR__RENDERERS__UNSUPPORTED_NODE:()=>bi,CODAMA_ERROR__UNEXPECTED_NESTED_NODE_KIND:()=>It,CODAMA_ERROR__UNEXPECTED_NODE_KIND:()=>bt,CODAMA_ERROR__UNRECOGNIZED_BYTES_ENCODING:()=>mi,CODAMA_ERROR__UNRECOGNIZED_NODE_KIND:()=>Et,CODAMA_ERROR__UNRECOGNIZED_NUMBER_FORMAT:()=>yi,CODAMA_ERROR__VERSION_MISMATCH:()=>Dt,CODAMA_ERROR__VISITORS__ACCOUNT_FIELD_NOT_FOUND:()=>xt,CODAMA_ERROR__VISITORS__CANNOT_ADD_DUPLICATED_PDA_NAMES:()=>Rt,CODAMA_ERROR__VISITORS__CANNOT_EXTEND_MISSING_VISIT_FUNCTION:()=>Ft,CODAMA_ERROR__VISITORS__CANNOT_FLATTEN_STRUCT_WITH_CONFLICTING_ATTRIBUTES:()=>_e,CODAMA_ERROR__VISITORS__CANNOT_REMOVE_LAST_PATH_IN_NODE_STACK:()=>Mt,CODAMA_ERROR__VISITORS__CANNOT_USE_OPTIONAL_ACCOUNT_AS_PDA_SEED_VALUE:()=>Ct,CODAMA_ERROR__VISITORS__CYCLIC_DEPENDENCY_DETECTED_WHEN_RESOLVING_INSTRUCTION_DEFAULT_VALUES:()=>Pt,CODAMA_ERROR__VISITORS__FAILED_TO_VALIDATE_NODE:()=>Lt,CODAMA_ERROR__VISITORS__INSTRUCTION_ENUM_ARGUMENT_NOT_FOUND:()=>Je,CODAMA_ERROR__VISITORS__INVALID_INSTRUCTION_DEFAULT_VALUE_DEPENDENCY:()=>We,CODAMA_ERROR__VISITORS__INVALID_NUMBER_WRAPPER:()=>wt,CODAMA_ERROR__VISITORS__INVALID_PDA_SEED_VALUES:()=>kt,CODAMA_ERROR__VISITORS__RENDER_MAP_KEY_NOT_FOUND:()=>Ti,CONTEXTUAL_VALUE_NODES:()=>ki,COUNT_NODES:()=>tt,CodamaError:()=>V,DISCRIMINATOR_NODES:()=>_r,ENUM_VARIANT_TYPE_NODES:()=>Fr,INSTRUCTION_INPUT_VALUE_NODES:()=>de,LINKABLE_NODES:()=>Zn,LINK_NODES:()=>ws,LOG_LEVELS:()=>cs,LinkableDictionary:()=>U,NodeStack:()=>q,PDA_SEED_NODES:()=>Cr,REGISTERED_CONTEXTUAL_VALUE_NODE_KINDS:()=>Ri,REGISTERED_COUNT_NODE_KINDS:()=>Or,REGISTERED_DISCRIMINATOR_NODE_KINDS:()=>Ir,REGISTERED_LINK_NODE_KINDS:()=>Vr,REGISTERED_NODE_KINDS:()=>P,REGISTERED_PDA_SEED_NODE_KINDS:()=>Pr,REGISTERED_TYPE_NODE_KINDS:()=>Pe,REGISTERED_VALUE_NODE_KINDS:()=>Di,STANDALONE_CONTEXTUAL_VALUE_NODE_KINDS:()=>vr,STANDALONE_TYPE_NODE_KINDS:()=>jr,STANDALONE_VALUE_NODE_KINDS:()=>Nr,TYPE_NODES:()=>_,VALUE_NODES:()=>w,accountBumpValueNode:()=>xs,accountLinkNode:()=>Xe,accountNode:()=>ee,accountValueNode:()=>Ye,addPdasVisitor:()=>nl,amountTypeNode:()=>it,argumentValueNode:()=>Ze,arrayTypeNode:()=>ot,arrayValueNode:()=>Zr,assertIsNestedTypeNode:()=>Q,assertIsNode:()=>p,assertIsNodeFilter:()=>lt,assertIsNodePath:()=>rs,booleanTypeNode:()=>wr,booleanValueNode:()=>Hs,bottomUpTransformerVisitor:()=>b,bytesTypeNode:()=>nt,bytesValueNode:()=>Rr,camelCase:()=>g,capitalize:()=>_i,conditionalValueNode:()=>mr,consoleLogVisitor:()=>Zc,constantDiscriminatorNode:()=>br,constantPdaSeedNode:()=>Re,constantPdaSeedNodeFromBytes:()=>Us,constantPdaSeedNodeFromProgramId:()=>$s,constantPdaSeedNodeFromString:()=>js,constantValueNode:()=>dt,constantValueNodeFromBytes:()=>Js,constantValueNodeFromString:()=>Ws,createFromJson:()=>Pl,createFromRoot:()=>li,createSubInstructionsFromEnumArgsVisitor:()=>ol,dateTimeTypeNode:()=>at,deduplicateIdenticalDefinedTypesVisitor:()=>al,deduplicateInstructionDependencies:()=>Jn,definedTypeLinkNode:()=>se,definedTypeNode:()=>pt,deleteNodesVisitor:()=>ti,enumEmptyVariantTypeNode:()=>ye,enumStructVariantTypeNode:()=>he,enumTupleVariantTypeNode:()=>st,enumTypeNode:()=>ut,enumValueNode:()=>Xr,errorNode:()=>un,extendVisitor:()=>j,fieldDiscriminatorNode:()=>rt,fillDefaultPdaSeedValuesVisitor:()=>si,findFirstNodeFromPath:()=>Yc,findInstructionNodeFromPath:()=>Hn,findLastNodeFromPath:()=>Qn,findProgramNodeFromPath:()=>le,fixedCountNode:()=>Fs,fixedSizeTypeNode:()=>ct,flattenInstructionArguments:()=>ai,flattenInstructionDataArgumentsVisitor:()=>il,flattenStruct:()=>fs,flattenStructVisitor:()=>ll,getAllAccounts:()=>Qs,getAllDefinedTypes:()=>ln,getAllErrors:()=>eu,getAllInstructionArguments:()=>re,getAllInstructions:()=>wi,getAllInstructionsWithSubs:()=>yr,getAllPdas:()=>Xs,getAllPrograms:()=>te,getByteSizeVisitor:()=>ri,getCommonInstructionAccountDefaultRules:()=>pl,getConjunctiveNodeSelectorFunction:()=>Xn,getDebugStringVisitor:()=>Xc,getDefinedTypeHistogramVisitor:()=>ui,getInstructionDependencies:()=>be,getLastNodeFromPath:()=>C,getLevelIndex:()=>St,getMaxByteSizeVisitor:()=>Qc,getNodePathUntilLastNode:()=>Wn,getNodeSelectorFunction:()=>ur,getRecordLinkablesVisitor:()=>lr,getResolvedInstructionInputsVisitor:()=>ii,getUniqueHashStringVisitor:()=>oi,getValidationItemsVisitor:()=>tl,getVisitFunctionName:()=>ie,hiddenPrefixTypeNode:()=>Lr,hiddenSuffixTypeNode:()=>Mr,identityValueNode:()=>gr,identityVisitor:()=>Ge,instructionAccountLinkNode:()=>hr,instructionAccountNode:()=>Ce,instructionArgumentLinkNode:()=>Ar,instructionArgumentNode:()=>F,instructionByteDeltaNode:()=>cn,instructionLinkNode:()=>Qe,instructionNode:()=>z,instructionRemainingAccountsNode:()=>fn,interceptFirstVisitVisitor:()=>ss,interceptVisitor:()=>oe,isCodamaError:()=>Is,isDataEnum:()=>Ks,isDecimal:()=>Gs,isFilledNodePath:()=>ei,isInteger:()=>Bs,isNestedTypeNode:()=>Ci,isNode:()=>y,isNodeFilter:()=>Ur,isNodePath:()=>ve,isScalarEnum:()=>ke,isSignedInteger:()=>zs,isUnsignedInteger:()=>qs,kebabCase:()=>Ps,logError:()=>_s,logInfo:()=>Rs,logWarn:()=>Ds,mapEntryValueNode:()=>Qr,mapTypeNode:()=>$r,mapValueNode:()=>en,mapVisitor:()=>Vt,mergeVisitor:()=>fe,nodePathToString:()=>is,nodePathToStringArray:()=>ns,nonNullableIdentityVisitor:()=>ae,noneValueNode:()=>Ys,numberTypeNode:()=>pe,numberValueNode:()=>tn,optionTypeNode:()=>zr,parseDocs:()=>H,parseOptionalAccountStrategy:()=>Fi,pascalCase:()=>jt,payerValueNode:()=>Tr,pdaLinkNode:()=>Te,pdaNode:()=>ne,pdaSeedValueNode:()=>De,pdaValueNode:()=>et,pipe:()=>I,postOffsetTypeNode:()=>qr,preOffsetTypeNode:()=>Br,prefixedCountNode:()=>Er,programIdValueNode:()=>Ut,programLinkNode:()=>ge,programNode:()=>J,publicKeyTypeNode:()=>Pi,publicKeyValueNode:()=>x,recordLinkablesOnFirstVisitVisitor:()=>G,recordNodeStackVisitor:()=>B,remainderCountNode:()=>Ls,remainderOptionTypeNode:()=>Gr,removeDocsVisitor:()=>as,removeNullAndAssertIsNodeFilter:()=>D,resolveNestedTypeNode:()=>Ae,resolverValueNode:()=>Sr,rootNode:()=>dn,rootNodeVisitor:()=>Ie,safeCaptureStackTrace:()=>ks,sentinelTypeNode:()=>Kr,setAccountDiscriminatorFromFieldVisitor:()=>fl,setFixedAccountSizesVisitor:()=>dl,setInstructionAccountDefaultValuesVisitor:()=>yl,setInstructionDiscriminatorsVisitor:()=>ml,setNumberWrappersVisitor:()=>Nl,setStructDefaultValuesVisitor:()=>vl,setTypeNode:()=>Hr,setValueNode:()=>rn,singleNodeVisitor:()=>ni,sizeDiscriminatorNode:()=>Ms,sizePrefixTypeNode:()=>Wr,snakeCase:()=>Cs,solAmountTypeNode:()=>ft,someValueNode:()=>nn,staticVisitor:()=>sr,stringTypeNode:()=>Dr,stringValueNode:()=>kr,structFieldTypeNode:()=>Z,structFieldTypeNodeFromInstructionArgumentNode:()=>xi,structFieldValueNode:()=>on,structTypeNode:()=>W,structTypeNodeFromInstructionArgumentNodes:()=>Zs,structValueNode:()=>an,tapVisitor:()=>el,throwValidatorItemsVisitor:()=>rl,titleCase:()=>$t,topDownTransformerVisitor:()=>cr,transformDefinedTypesIntoAccountsVisitor:()=>gl,transformNestedTypeNode:()=>me,transformU8ArraysToBytesVisitor:()=>Tl,tupleTypeNode:()=>Jr,tupleValueNode:()=>sn,unwrapDefinedTypesVisitor:()=>ci,unwrapInstructionArgsDefinedTypesVisitor:()=>hl,unwrapTupleEnumWithSingleStructVisitor:()=>Al,unwrapTypeDefinedLinksVisitor:()=>Vl,updateAccountsVisitor:()=>El,updateDefinedTypesVisitor:()=>bl,updateErrorsVisitor:()=>Il,updateInstructionsVisitor:()=>_l,updateProgramsVisitor:()=>kl,validateCodamaVersion:()=>ps,validationItem:()=>R,variablePdaSeedNode:()=>xr,visit:()=>N,visitOrElse:()=>Jc,voidVisitor:()=>us,zeroableOptionTypeNode:()=>Yr});var Et=1,bt=2,It=3,_t=4,pi=5,Dt=6,yi=7,mi=8,Ni=9,vi=10,gi=11,Rt=12e5,kt=1200001,Pt=1200002,Ct=1200003,We=1200004,xt=1200005,wt=1200006,Ft=1200007,Lt=1200008,Je=1200009,_e=1200010,Ti=1200011,Mt=1200012,hi=21e5,Ai=2100001,Vi=2100002,Si=2100003,Oi=2100004,Ei=2100005,bi=28e5;function Ii(t){return Array.isArray(t)?"%5B"+t.map(Ii).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Os([t,e]){return`${t}=${Ii(e)}`}function Es(t){let e=Object.entries(t).map(Os).join("&");return btoa(e)}var wl={[Ai]:"Account type [$name] is missing from the IDL types.",[Vi]:"Argument name [$name] is missing from the instruction definition.",[Ei]:"Program ID kind [$kind] is not implemented.",[Oi]:"Seed kind [$kind] is not implemented.",[Si]:"Field type is missing for path [$path] in [$idlType].",[hi]:"Unrecognized Anchor IDL type [$idlType].",[gi]:"Discriminator field [$field] has no default value.",[vi]:"Could not find discriminator field [$field]",[Ni]:"Enum variant [$variant] not found in enum type [$enumName].",[_t]:"Could not find linked node [$name] from [$kind].",[pi]:"Node.js filesystem function [$fsFunction] is not available in your environment.",[bi]:"Cannot render the encountered node of kind [$kind].",[It]:"Expected nested node of kind [$expectedKinds], got [$kind]",[bt]:"Expected node of kind [$expectedKinds], got [$kind].",[mi]:"Unrecognized bytes encoding [$encoding].",[Et]:"Unrecognized node kind [$kind].",[yi]:"Unrecognized number format [$format].",[Dt]:"The provided RootNode version [$rootVersion] is not compatible with the installed Codama version [$codamaVersion].",[xt]:"Account [$name] does not have a field named [$missingField].",[Rt]:"Cannot add PDAs to program [$programName] because the following PDA names already exist [$duplicatedPdaNames].",[Ft]:"Cannot extend visitor with function [$visitFunction] as the base visitor does not support it.",[_e]:"Cannot flatten struct since this would cause the following attributes to conflict [$conflictingAttributes].",[Mt]:"Cannot remove the last path in the node stack.",[Ct]:"Cannot use optional account [$seedValueName] as the [$seedName] PDA seed for the [$instructionAccountName] account of the [$instructionName] instruction.",[Pt]:"Circular dependency detected when resolving the accounts and arguments' default values of the [$instructionName] instruction. Got the following dependency cycle [$formattedCycle].",[Lt]:"Failed to validate the given node [$formattedHistogram].",[Je]:"Could not find an enum argument named [$argumentName] for instruction [$instructionName].",[We]:"Dependency [$dependencyName] of kind [$dependencyKind] is not a valid dependency of [$parentName] of kind [$parentKind] in the [$instructionName] instruction.",[wt]:"Invalid number wrapper kind [$wrapper].",[kt]:"Invalid seed values for PDA [$pdaName] in instruction [$instructionName].",[Ti]:"Cannot find key [$key] in RenderMap."};function bs(t,e={}){{let n=`Codama error #${t}; Decode this error by running \`npx @codama/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${Es(e)}'`),`${n}\``}}function Is(t,e){return t instanceof Error&&t.name==="CodamaError"?e!==void 0?t.context.__code===e:!0:!1}var V=class extends Error{constructor(...[e,n]){let r,u;if(n){let{cause:s,...a}=n;s&&(u={cause:s}),Object.keys(a).length>0&&(r=a)}let i=bs(e,r);super(i,u);He(this,"context");this.context={__code:e,...r},this.name="CodamaError"}};function _s(t){console.error(t)}function Ds(t){console.warn(t)}function Rs(t){console.log(t)}function ks(...t){"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...t)}function H(t){return t==null?[]:Array.isArray(t)?t:[t]}function _i(t){return t.length===0?t:t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function $t(t){return t.replace(/([A-Z])/g," $1").split(/[^a-zA-Z0-9]+/).filter(e=>e.length>0).map(_i).join(" ")}function jt(t){return $t(t).split(" ").join("")}function g(t){if(t.length===0)return t;let e=jt(t);return e.charAt(0).toLowerCase()+e.slice(1)}function Ps(t){return $t(t).split(" ").join("-").toLowerCase()}function Cs(t){return $t(t).split(" ").join("_").toLowerCase()}function xs(t){return Object.freeze({kind:"accountBumpValueNode",name:g(t)})}function Ye(t){return Object.freeze({kind:"accountValueNode",name:g(t)})}function Ze(t){return Object.freeze({kind:"argumentValueNode",name:g(t)})}function mr(t){return Object.freeze({kind:"conditionalValueNode",condition:t.condition,...t.value!==void 0&&{value:t.value},...t.ifTrue!==void 0&&{ifTrue:t.ifTrue},...t.ifFalse!==void 0&&{ifFalse:t.ifFalse}})}var Nr=["arrayValueNode","bytesValueNode","booleanValueNode","constantValueNode","enumValueNode","mapValueNode","noneValueNode","numberValueNode","setValueNode","someValueNode","structValueNode","tupleValueNode","publicKeyValueNode","stringValueNode"],Di=[...Nr,"mapEntryValueNode","structFieldValueNode"],w=Nr,vr=["accountBumpValueNode","accountValueNode","argumentValueNode","conditionalValueNode","identityValueNode","payerValueNode","pdaValueNode","programIdValueNode","resolverValueNode"],Ri=[...vr,"pdaSeedValueNode"],ki=vr,de=[...w,...ki,"programLinkNode"];function gr(){return Object.freeze({kind:"identityValueNode"})}function Tr(){return Object.freeze({kind:"payerValueNode"})}function De(t,e){return Object.freeze({kind:"pdaSeedValueNode",name:g(t),value:e})}function ge(t){return Object.freeze({kind:"programLinkNode",name:g(t)})}function Xe(t,e){return Object.freeze({kind:"accountLinkNode",...e===void 0?{}:{program:typeof e=="string"?ge(e):e},name:g(t)})}function se(t,e){return Object.freeze({kind:"definedTypeLinkNode",...e===void 0?{}:{program:typeof e=="string"?ge(e):e},name:g(t)})}function Qe(t,e){return Object.freeze({kind:"instructionLinkNode",...e===void 0?{}:{program:typeof e=="string"?ge(e):e},name:g(t)})}function hr(t,e){return Object.freeze({kind:"instructionAccountLinkNode",...e===void 0?{}:{instruction:typeof e=="string"?Qe(e):e},name:g(t)})}function Ar(t,e){return Object.freeze({kind:"instructionArgumentLinkNode",...e===void 0?{}:{instruction:typeof e=="string"?Qe(e):e},name:g(t)})}var Vr=["accountLinkNode","definedTypeLinkNode","instructionAccountLinkNode","instructionArgumentLinkNode","instructionLinkNode","pdaLinkNode","programLinkNode"],ws=Vr;function Te(t,e){return Object.freeze({kind:"pdaLinkNode",...e===void 0?{}:{program:typeof e=="string"?ge(e):e},name:g(t)})}function et(t,e=[]){return Object.freeze({kind:"pdaValueNode",pda:typeof t=="string"?Te(t):t,seeds:e})}function Ut(){return Object.freeze({kind:"programIdValueNode"})}function Sr(t,e={}){return Object.freeze({kind:"resolverValueNode",name:g(t),docs:H(e.docs),dependsOn:e.dependsOn})}var Or=["fixedCountNode","remainderCountNode","prefixedCountNode"],tt=Or;function Fs(t){return Object.freeze({kind:"fixedCountNode",value:t})}function Er(t){return Object.freeze({kind:"prefixedCountNode",prefix:t})}function Ls(){return Object.freeze({kind:"remainderCountNode"})}function br(t,e=0){return Object.freeze({kind:"constantDiscriminatorNode",offset:e,constant:t})}var Ir=["constantDiscriminatorNode","fieldDiscriminatorNode","sizeDiscriminatorNode"],_r=Ir;function rt(t,e=0){return Object.freeze({kind:"fieldDiscriminatorNode",name:g(t),offset:e})}function Ms(t){return Object.freeze({kind:"sizeDiscriminatorNode",size:t})}function nt(){return Object.freeze({kind:"bytesTypeNode"})}function Pi(){return Object.freeze({kind:"publicKeyTypeNode"})}function Dr(t){return Object.freeze({kind:"stringTypeNode",encoding:t})}function Rr(t,e){return Object.freeze({kind:"bytesValueNode",data:e,encoding:t})}function kr(t){return Object.freeze({kind:"stringValueNode",string:t})}function Re(t,e){return Object.freeze({kind:"constantPdaSeedNode",type:t,value:e})}function $s(){return Re(Pi(),Ut())}function js(t,e){return Re(Dr(t),kr(e))}function Us(t,e){return Re(nt(),Rr(t,e))}var Pr=["constantPdaSeedNode","variablePdaSeedNode"],Cr=Pr;function xr(t,e,n){return Object.freeze({kind:"variablePdaSeedNode",name:g(t),docs:H(n),type:e})}function it(t,e,n){return Object.freeze({kind:"amountTypeNode",decimals:e,...n!==void 0&&{unit:n},number:t})}function ot(t,e){return Object.freeze({kind:"arrayTypeNode",item:t,count:e})}function pe(t,e="le"){return Object.freeze({kind:"numberTypeNode",format:t,endian:e})}function zs(t){return t.format.startsWith("i")}function qs(t){return t.format.startsWith("u")||t.format==="shortU16"}function Bs(t){return!t.format.startsWith("f")}function Gs(t){return t.format.startsWith("f")}function wr(t){return Object.freeze({kind:"booleanTypeNode",size:t!=null?t:pe("u8")})}function at(t){return Object.freeze({kind:"dateTimeTypeNode",number:t})}function ye(t,e){return Object.freeze({kind:"enumEmptyVariantTypeNode",name:g(t),discriminator:e})}function he(t,e,n){return Object.freeze({kind:"enumStructVariantTypeNode",name:g(t),...n!==void 0&&{discriminator:n},struct:e})}function st(t,e,n){return Object.freeze({kind:"enumTupleVariantTypeNode",name:g(t),...n!==void 0&&{discriminator:n},tuple:e})}function ut(t,e={}){var n;return Object.freeze({kind:"enumTypeNode",variants:t,size:(n=e.size)!=null?n:pe("u8")})}function ke(t){return t.variants.every(e=>e.kind==="enumEmptyVariantTypeNode")}function Ks(t){return!ke(t)}var Fr=["enumEmptyVariantTypeNode","enumStructVariantTypeNode","enumTupleVariantTypeNode"];function ct(t,e){return Object.freeze({kind:"fixedSizeTypeNode",size:e,type:t})}function Lr(t,e){return Object.freeze({kind:"hiddenPrefixTypeNode",type:t,prefix:e})}function Mr(t,e){return Object.freeze({kind:"hiddenSuffixTypeNode",type:t,suffix:e})}function $r(t,e,n){return Object.freeze({kind:"mapTypeNode",key:t,value:e,count:n})}var jr=["amountTypeNode","arrayTypeNode","booleanTypeNode","bytesTypeNode","dateTimeTypeNode","enumTypeNode","fixedSizeTypeNode","hiddenPrefixTypeNode","hiddenSuffixTypeNode","mapTypeNode","numberTypeNode","optionTypeNode","postOffsetTypeNode","preOffsetTypeNode","publicKeyTypeNode","remainderOptionTypeNode","sentinelTypeNode","setTypeNode","sizePrefixTypeNode","solAmountTypeNode","stringTypeNode","structTypeNode","tupleTypeNode","zeroableOptionTypeNode"],Pe=[...jr,"structFieldTypeNode","enumEmptyVariantTypeNode","enumStructVariantTypeNode","enumTupleVariantTypeNode"],_=[...jr,"definedTypeLinkNode"],P=[...Ri,...Ir,...Vr,...Pr,...Or,...Pe,...Di,"rootNode","programNode","pdaNode","accountNode","instructionAccountNode","instructionArgumentNode","instructionByteDeltaNode","instructionNode","instructionRemainingAccountsNode","errorNode","definedTypeNode"];function y(t,e){let n=Array.isArray(e)?e:[e];return!!t&&n.includes(t.kind)}function p(t,e){var r;let n=Array.isArray(e)?e:[e];if(!y(t,n))throw new V(bt,{expectedKinds:n,kind:(r=t==null?void 0:t.kind)!=null?r:null,node:t})}function Ur(t){return e=>y(e,t)}function lt(t){return e=>(p(e,t),!0)}function D(t){return e=>(e&&p(e,t),e!=null)}function Ae(t){switch(t.kind){case"fixedSizeTypeNode":case"hiddenPrefixTypeNode":case"hiddenSuffixTypeNode":case"postOffsetTypeNode":case"preOffsetTypeNode":case"sentinelTypeNode":case"sizePrefixTypeNode":return Ae(t.type);default:return t}}function me(t,e){switch(t.kind){case"fixedSizeTypeNode":case"hiddenPrefixTypeNode":case"hiddenSuffixTypeNode":case"postOffsetTypeNode":case"preOffsetTypeNode":case"sentinelTypeNode":case"sizePrefixTypeNode":return Object.freeze({...t,type:me(t.type,e)});default:return e(t)}}function Ci(t,e){if(!y(t,_))return!1;let n=Array.isArray(e)?e:[e],r=Ae(t);return!!t&&n.includes(r.kind)}function Q(t,e){var r;let n=Array.isArray(e)?e:[e];if(!Ci(t,n))throw new V(It,{expectedKinds:n,kind:(r=t==null?void 0:t.kind)!=null?r:null,node:t})}function zr(t,e={}){var n,r;return Object.freeze({kind:"optionTypeNode",fixed:(n=e.fixed)!=null?n:!1,item:t,prefix:(r=e.prefix)!=null?r:pe("u8")})}function qr(t,e,n){return Object.freeze({kind:"postOffsetTypeNode",offset:e,strategy:n!=null?n:"relative",type:t})}function Br(t,e,n){return Object.freeze({kind:"preOffsetTypeNode",offset:e,strategy:n!=null?n:"relative",type:t})}function Gr(t){return Object.freeze({kind:"remainderOptionTypeNode",item:t})}function Kr(t,e){return Object.freeze({kind:"sentinelTypeNode",type:t,sentinel:e})}function Hr(t,e){return Object.freeze({kind:"setTypeNode",item:t,count:e})}function Wr(t,e){return Object.freeze({kind:"sizePrefixTypeNode",type:t,prefix:e})}function ft(t){return Object.freeze({kind:"solAmountTypeNode",number:t})}function Z(t){return Object.freeze({kind:"structFieldTypeNode",name:g(t.name),...t.defaultValueStrategy!==void 0&&{defaultValueStrategy:t.defaultValueStrategy},docs:H(t.docs),type:t.type,...t.defaultValue!==void 0&&{defaultValue:t.defaultValue}})}function W(t){return Object.freeze({kind:"structTypeNode",fields:t})}function Jr(t){return Object.freeze({kind:"tupleTypeNode",items:t})}function Yr(t,e){return Object.freeze({kind:"zeroableOptionTypeNode",item:t,...e!==void 0&&{zeroValue:e}})}function Zr(t){return Object.freeze({kind:"arrayValueNode",items:t})}function Hs(t){return Object.freeze({kind:"booleanValueNode",boolean:t})}function dt(t,e){return Object.freeze({kind:"constantValueNode",type:t,value:e})}function Ws(t,e){return dt(Dr(t),kr(e))}function Js(t,e){return dt(nt(),Rr(t,e))}function Xr(t,e,n){return Object.freeze({kind:"enumValueNode",variant:g(e),enum:typeof t=="string"?se(t):t,...n!==void 0&&{value:n}})}function Qr(t,e){return Object.freeze({kind:"mapEntryValueNode",key:t,value:e})}function en(t){return Object.freeze({kind:"mapValueNode",entries:t})}function Ys(){return Object.freeze({kind:"noneValueNode"})}function tn(t){return Object.freeze({kind:"numberValueNode",number:t})}function x(t,e){return Object.freeze({kind:"publicKeyValueNode",publicKey:t,...e!==void 0&&{identifier:g(e)}})}function rn(t){return Object.freeze({kind:"setValueNode",items:t})}function nn(t){return Object.freeze({kind:"someValueNode",value:t})}function on(t,e){return Object.freeze({kind:"structFieldValueNode",name:g(t),value:e})}function an(t){return Object.freeze({kind:"structValueNode",fields:t})}function sn(t){return Object.freeze({kind:"tupleValueNode",items:t})}function ee(t){var e;return Object.freeze({kind:"accountNode",name:g(t.name),...t.size===void 0?{}:{size:t.size},docs:H(t.docs),data:(e=t.data)!=null?e:W([]),...t.pda!==void 0&&{pda:t.pda},...t.discriminators!==void 0&&{discriminators:t.discriminators}})}function pt(t){return Object.freeze({kind:"definedTypeNode",name:g(t.name),docs:H(t.docs),type:t.type})}function un(t){return Object.freeze({kind:"errorNode",name:g(t.name),code:t.code,message:t.message,docs:H(t.docs)})}function Ce(t){var e;return Object.freeze({kind:"instructionAccountNode",name:g(t.name),isWritable:t.isWritable,isSigner:t.isSigner,isOptional:(e=t.isOptional)!=null?e:!1,docs:H(t.docs),...t.defaultValue!==void 0&&{defaultValue:t.defaultValue}})}function F(t){return Object.freeze({kind:"instructionArgumentNode",name:g(t.name),...t.defaultValueStrategy!==void 0&&{defaultValueStrategy:t.defaultValueStrategy},docs:H(t.docs),type:t.type,...t.defaultValue!==void 0&&{defaultValue:t.defaultValue}})}function Zs(t){return W(t.map(xi))}function xi(t){return y(t.defaultValue,w)?Z({...t,defaultValue:t.defaultValue}):Z({...t,defaultValue:void 0,defaultValueStrategy:void 0})}function cn(t,e={}){var n;return Object.freeze({kind:"instructionByteDeltaNode",withHeader:(n=e.withHeader)!=null?n:!y(t,"resolverValueNode"),...e.subtract!==void 0&&{subtract:e.subtract},value:t})}function J(t){var e,n,r,u,i,s;return Object.freeze({kind:"programNode",name:g(t.name),publicKey:t.publicKey,version:(e=t.version)!=null?e:"0.0.0",...t.origin!==void 0&&{origin:t.origin},docs:H(t.docs),accounts:(n=t.accounts)!=null?n:[],instructions:(r=t.instructions)!=null?r:[],definedTypes:(u=t.definedTypes)!=null?u:[],pdas:(i=t.pdas)!=null?i:[],errors:(s=t.errors)!=null?s:[]})}function te(t){return Array.isArray(t)?t:t.kind==="programNode"?[t]:[t.program,...t.additionalPrograms]}function Xs(t){return te(t).flatMap(e=>e.pdas)}function Qs(t){return te(t).flatMap(e=>e.accounts)}function ln(t){return te(t).flatMap(e=>e.definedTypes)}function wi(t){return te(t).flatMap(e=>e.instructions)}function eu(t){return te(t).flatMap(e=>e.errors)}function z(t){var e,n;return Object.freeze({kind:"instructionNode",name:g(t.name),docs:H(t.docs),optionalAccountStrategy:Fi(t.optionalAccountStrategy),accounts:(e=t.accounts)!=null?e:[],arguments:(n=t.arguments)!=null?n:[],extraArguments:t.extraArguments,remainingAccounts:t.remainingAccounts,byteDeltas:t.byteDeltas,discriminators:t.discriminators,subInstructions:t.subInstructions})}function Fi(t){return t!=null?t:"programId"}function re(t){var e;return[...t.arguments,...(e=t.extraArguments)!=null?e:[]]}function yr(t,e={}){let{leavesOnly:n=!1,subInstructionsFirst:r=!1}=e;if(y(t,"instructionNode")){if(!t.subInstructions||t.subInstructions.length===0)return[t];let i=t.subInstructions.flatMap(s=>yr(s,e));return n?i:r?[...i,t]:[t,...i]}return(y(t,"programNode")?t.instructions:wi(t)).flatMap(i=>yr(i,e))}function fn(t,e={}){return Object.freeze({kind:"instructionRemainingAccountsNode",...e.isOptional!==void 0&&{isOptional:e.isOptional},...e.isSigner!==void 0&&{isSigner:e.isSigner},...e.isWritable!==void 0&&{isWritable:e.isWritable},docs:H(e.docs),value:t})}function ne(t){return Object.freeze({kind:"pdaNode",name:g(t.name),docs:H(t.docs),...t.programId&&{programId:t.programId},seeds:t.seeds})}function dn(t,e){return Object.freeze({kind:"rootNode",standard:"codama",version:"1.3.7",program:t,additionalPrograms:e!=null?e:[]})}var Yn=Vs(es(),1);function N(t,e){let n=ie(t.kind);return e[n](t)}function Jc(t,e,n){let r=ie(t.kind);return(r in e?e[r]:n)(t)}function ie(t){if(!P.includes(t))throw new V(Et,{kind:t});return`visit${jt(t.slice(0,-4))}`}function sr(t,e={}){var u;let n=(u=e.keys)!=null?u:P,r={};return n.forEach(i=>{r[ie(i)]=t.bind(r)}),r}function Ge(t={}){var u;let e=(u=t.keys)!=null?u:P,n=sr(i=>Object.freeze({...i}),{keys:e}),r=i=>s=>e.includes(s.kind)?N(s,i):Object.freeze({...s});return e.includes("rootNode")&&(n.visitRoot=function(s){let a=r(this)(s.program);return a===null?null:(p(a,"programNode"),dn(a,s.additionalPrograms.map(r(this)).filter(D("programNode"))))}),e.includes("programNode")&&(n.visitProgram=function(s){return J({...s,accounts:s.accounts.map(r(this)).filter(D("accountNode")),definedTypes:s.definedTypes.map(r(this)).filter(D("definedTypeNode")),errors:s.errors.map(r(this)).filter(D("errorNode")),instructions:s.instructions.map(r(this)).filter(D("instructionNode")),pdas:s.pdas.map(r(this)).filter(D("pdaNode"))})}),e.includes("pdaNode")&&(n.visitPda=function(s){return ne({...s,seeds:s.seeds.map(r(this)).filter(D(Cr))})}),e.includes("accountNode")&&(n.visitAccount=function(s){var c;let a=r(this)(s.data);if(a===null)return null;p(a,"structTypeNode");let o=s.pda&&(c=r(this)(s.pda))!=null?c:void 0;return o&&p(o,"pdaLinkNode"),ee({...s,data:a,pda:o})}),e.includes("instructionNode")&&(n.visitInstruction=function(s){return z({...s,accounts:s.accounts.map(r(this)).filter(D("instructionAccountNode")),arguments:s.arguments.map(r(this)).filter(D("instructionArgumentNode")),byteDeltas:s.byteDeltas?s.byteDeltas.map(r(this)).filter(D("instructionByteDeltaNode")):void 0,discriminators:s.discriminators?s.discriminators.map(r(this)).filter(D(_r)):void 0,extraArguments:s.extraArguments?s.extraArguments.map(r(this)).filter(D("instructionArgumentNode")):void 0,remainingAccounts:s.remainingAccounts?s.remainingAccounts.map(r(this)).filter(D("instructionRemainingAccountsNode")):void 0,subInstructions:s.subInstructions?s.subInstructions.map(r(this)).filter(D("instructionNode")):void 0})}),e.includes("instructionAccountNode")&&(n.visitInstructionAccount=function(s){var o;let a=s.defaultValue&&(o=r(this)(s.defaultValue))!=null?o:void 0;return a&&p(a,de),Ce({...s,defaultValue:a})}),e.includes("instructionArgumentNode")&&(n.visitInstructionArgument=function(s){var c;let a=r(this)(s.type);if(a===null)return null;p(a,_);let o=s.defaultValue&&(c=r(this)(s.defaultValue))!=null?c:void 0;return o&&p(o,de),F({...s,defaultValue:o,type:a})}),e.includes("instructionRemainingAccountsNode")&&(n.visitInstructionRemainingAccounts=function(s){let a=r(this)(s.value);return a===null?null:(p(a,["argumentValueNode","resolverValueNode"]),fn(a,{...s}))}),e.includes("instructionByteDeltaNode")&&(n.visitInstructionByteDelta=function(s){let a=r(this)(s.value);return a===null?null:(p(a,["numberValueNode","accountLinkNode","argumentValueNode","resolverValueNode"]),cn(a,{...s}))}),e.includes("definedTypeNode")&&(n.visitDefinedType=function(s){let a=r(this)(s.type);return a===null?null:(p(a,_),pt({...s,type:a}))}),e.includes("arrayTypeNode")&&(n.visitArrayType=function(s){let a=r(this)(s.count);if(a===null)return null;p(a,tt);let o=r(this)(s.item);return o===null?null:(p(o,_),ot(o,a))}),e.includes("enumTypeNode")&&(n.visitEnumType=function(s){return ut(s.variants.map(r(this)).filter(D(Fr)),{size:s.size})}),e.includes("enumStructVariantTypeNode")&&(n.visitEnumStructVariantType=function(s){let a=r(this)(s.struct);return a?(p(a,"structTypeNode"),a.fields.length===0?ye(s.name):he(s.name,a)):ye(s.name)}),e.includes("enumTupleVariantTypeNode")&&(n.visitEnumTupleVariantType=function(s){let a=r(this)(s.tuple);return a?(p(a,"tupleTypeNode"),a.items.length===0?ye(s.name):st(s.name,a)):ye(s.name)}),e.includes("mapTypeNode")&&(n.visitMapType=function(s){let a=r(this)(s.count);if(a===null)return null;p(a,tt);let o=r(this)(s.key);if(o===null)return null;p(o,_);let c=r(this)(s.value);return c===null?null:(p(c,_),$r(o,c,a))}),e.includes("optionTypeNode")&&(n.visitOptionType=function(s){let a=r(this)(s.prefix);if(a===null)return null;Q(a,"numberTypeNode");let o=r(this)(s.item);return o===null?null:(p(o,_),zr(o,{...s,prefix:a}))}),e.includes("zeroableOptionTypeNode")&&(n.visitZeroableOptionType=function(s){var c;let a=r(this)(s.item);if(a===null)return null;p(a,_);let o=s.zeroValue&&(c=r(this)(s.zeroValue))!=null?c:void 0;return o&&p(o,"constantValueNode"),Yr(a,o)}),e.includes("remainderOptionTypeNode")&&(n.visitRemainderOptionType=function(s){let a=r(this)(s.item);return a===null?null:(p(a,_),Gr(a))}),e.includes("booleanTypeNode")&&(n.visitBooleanType=function(s){let a=r(this)(s.size);return a===null?null:(Q(a,"numberTypeNode"),wr(a))}),e.includes("setTypeNode")&&(n.visitSetType=function(s){let a=r(this)(s.count);if(a===null)return null;p(a,tt);let o=r(this)(s.item);return o===null?null:(p(o,_),Hr(o,a))}),e.includes("structTypeNode")&&(n.visitStructType=function(s){let a=s.fields.map(r(this)).filter(D("structFieldTypeNode"));return W(a)}),e.includes("structFieldTypeNode")&&(n.visitStructFieldType=function(s){var c;let a=r(this)(s.type);if(a===null)return null;p(a,_);let o=s.defaultValue&&(c=r(this)(s.defaultValue))!=null?c:void 0;return o&&p(o,w),Z({...s,defaultValue:o,type:a})}),e.includes("tupleTypeNode")&&(n.visitTupleType=function(s){let a=s.items.map(r(this)).filter(D(_));return Jr(a)}),e.includes("amountTypeNode")&&(n.visitAmountType=function(s){let a=r(this)(s.number);return a===null?null:(Q(a,"numberTypeNode"),it(a,s.decimals,s.unit))}),e.includes("dateTimeTypeNode")&&(n.visitDateTimeType=function(s){let a=r(this)(s.number);return a===null?null:(Q(a,"numberTypeNode"),at(a))}),e.includes("solAmountTypeNode")&&(n.visitSolAmountType=function(s){let a=r(this)(s.number);return a===null?null:(Q(a,"numberTypeNode"),ft(a))}),e.includes("prefixedCountNode")&&(n.visitPrefixedCount=function(s){let a=r(this)(s.prefix);return a===null?null:(Q(a,"numberTypeNode"),Er(a))}),e.includes("arrayValueNode")&&(n.visitArrayValue=function(s){return Zr(s.items.map(r(this)).filter(D(w)))}),e.includes("constantValueNode")&&(n.visitConstantValue=function(s){let a=r(this)(s.type);if(a===null)return null;p(a,_);let o=r(this)(s.value);return o===null?null:(p(o,w),dt(a,o))}),e.includes("enumValueNode")&&(n.visitEnumValue=function(s){var c;let a=r(this)(s.enum);if(a===null)return null;p(a,["definedTypeLinkNode"]);let o=s.value&&(c=r(this)(s.value))!=null?c:void 0;return o&&p(o,["structValueNode","tupleValueNode"]),Xr(a,s.variant,o)}),e.includes("mapValueNode")&&(n.visitMapValue=function(s){return en(s.entries.map(r(this)).filter(D("mapEntryValueNode")))}),e.includes("mapEntryValueNode")&&(n.visitMapEntryValue=function(s){let a=r(this)(s.key);if(a===null)return null;p(a,w);let o=r(this)(s.value);return o===null?null:(p(o,w),Qr(a,o))}),e.includes("setValueNode")&&(n.visitSetValue=function(s){return rn(s.items.map(r(this)).filter(D(w)))}),e.includes("someValueNode")&&(n.visitSomeValue=function(s){let a=r(this)(s.value);return a===null?null:(p(a,w),nn(a))}),e.includes("structValueNode")&&(n.visitStructValue=function(s){return an(s.fields.map(r(this)).filter(D("structFieldValueNode")))}),e.includes("structFieldValueNode")&&(n.visitStructFieldValue=function(s){let a=r(this)(s.value);return a===null?null:(p(a,w),on(s.name,a))}),e.includes("tupleValueNode")&&(n.visitTupleValue=function(s){return sn(s.items.map(r(this)).filter(D(w)))}),e.includes("constantPdaSeedNode")&&(n.visitConstantPdaSeed=function(s){let a=r(this)(s.type);if(a===null)return null;p(a,_);let o=r(this)(s.value);return o===null?null:(p(o,[...w,"programIdValueNode"]),Re(a,o))}),e.includes("variablePdaSeedNode")&&(n.visitVariablePdaSeed=function(s){let a=r(this)(s.type);return a===null?null:(p(a,_),xr(s.name,a,s.docs))}),e.includes("resolverValueNode")&&(n.visitResolverValue=function(s){var o;let a=((o=s.dependsOn)!=null?o:[]).map(r(this)).filter(D(["accountValueNode","argumentValueNode"]));return Sr(s.name,{...s,dependsOn:a.length===0?void 0:a})}),e.includes("conditionalValueNode")&&(n.visitConditionalValue=function(s){var d,f,m;let a=r(this)(s.condition);if(a===null)return null;p(a,["resolverValueNode","accountValueNode","argumentValueNode"]);let o=s.value&&(d=r(this)(s.value))!=null?d:void 0;o&&p(o,w);let c=s.ifTrue&&(f=r(this)(s.ifTrue))!=null?f:void 0;c&&p(c,de);let l=s.ifFalse&&(m=r(this)(s.ifFalse))!=null?m:void 0;return l&&p(l,de),!c&&!l?null:mr({condition:a,ifFalse:l,ifTrue:c,value:o})}),e.includes("pdaValueNode")&&(n.visitPdaValue=function(s){let a=r(this)(s.pda);if(a===null)return null;p(a,["pdaLinkNode","pdaNode"]);let o=s.seeds.map(r(this)).filter(D("pdaSeedValueNode"));return et(a,o)}),e.includes("pdaSeedValueNode")&&(n.visitPdaSeedValue=function(s){let a=r(this)(s.value);return a===null?null:(p(a,[...w,"accountValueNode","argumentValueNode"]),De(s.name,a))}),e.includes("fixedSizeTypeNode")&&(n.visitFixedSizeType=function(s){let a=r(this)(s.type);return a===null?null:(p(a,_),ct(a,s.size))}),e.includes("sizePrefixTypeNode")&&(n.visitSizePrefixType=function(s){let a=r(this)(s.prefix);if(a===null)return null;Q(a,"numberTypeNode");let o=r(this)(s.type);return o===null?null:(p(o,_),Wr(o,a))}),e.includes("preOffsetTypeNode")&&(n.visitPreOffsetType=function(s){let a=r(this)(s.type);return a===null?null:(p(a,_),Br(a,s.offset,s.strategy))}),e.includes("postOffsetTypeNode")&&(n.visitPostOffsetType=function(s){let a=r(this)(s.type);return a===null?null:(p(a,_),qr(a,s.offset,s.strategy))}),e.includes("sentinelTypeNode")&&(n.visitSentinelType=function(s){let a=r(this)(s.sentinel);if(a===null)return null;p(a,"constantValueNode");let o=r(this)(s.type);return o===null?null:(p(o,_),Kr(o,a))}),e.includes("hiddenPrefixTypeNode")&&(n.visitHiddenPrefixType=function(s){let a=r(this)(s.type);if(a===null)return null;p(a,_);let o=s.prefix.map(r(this)).filter(D("constantValueNode"));return o.length===0?a:Lr(a,o)}),e.includes("hiddenSuffixTypeNode")&&(n.visitHiddenSuffixType=function(s){let a=r(this)(s.type);if(a===null)return null;p(a,_);let o=s.suffix.map(r(this)).filter(D("constantValueNode"));return o.length===0?a:Mr(a,o)}),e.includes("constantDiscriminatorNode")&&(n.visitConstantDiscriminator=function(s){let a=r(this)(s.constant);return a===null?null:(p(a,"constantValueNode"),br(a,s.offset))}),e.includes("accountLinkNode")&&(n.visitAccountLink=function(s){var o;let a=s.program&&(o=r(this)(s.program))!=null?o:void 0;return a&&p(a,"programLinkNode"),Xe(s.name,a)}),e.includes("definedTypeLinkNode")&&(n.visitDefinedTypeLink=function(s){var o;let a=s.program&&(o=r(this)(s.program))!=null?o:void 0;return a&&p(a,"programLinkNode"),se(s.name,a)}),e.includes("instructionLinkNode")&&(n.visitInstructionLink=function(s){var o;let a=s.program&&(o=r(this)(s.program))!=null?o:void 0;return a&&p(a,"programLinkNode"),Qe(s.name,a)}),e.includes("instructionAccountLinkNode")&&(n.visitInstructionAccountLink=function(s){var o;let a=s.instruction&&(o=r(this)(s.instruction))!=null?o:void 0;return a&&p(a,"instructionLinkNode"),hr(s.name,a)}),e.includes("instructionArgumentLinkNode")&&(n.visitInstructionArgumentLink=function(s){var o;let a=s.instruction&&(o=r(this)(s.instruction))!=null?o:void 0;return a&&p(a,"instructionLinkNode"),Ar(s.name,a)}),e.includes("pdaLinkNode")&&(n.visitPdaLink=function(s){var o;let a=s.program&&(o=r(this)(s.program))!=null?o:void 0;return a&&p(a,"programLinkNode"),Te(s.name,a)}),n}function oe(t,e){let n=P.map(ie);return Object.fromEntries(Object.keys(t).flatMap(r=>{let u=r;return n.includes(u)?[[u,function(s){let a=t[u];return e(s,a.bind(this))}]]:[]}))}var ur=t=>{if(typeof t=="function")return t;let e=(i,s)=>{if(s==="*")return!0;let a=s.match(/^(?:\[([^\]]+)\])?(.*)?$/);if(!a)return!1;let[,o,c]=a,l=o?o.split("|").map(g):[];return!(l.length>0&&!l.includes(i.kind)||c&&(!("name"in i)||g(c)!==i.name))},n=(i,s)=>{if(s.length===0)return!0;if(i.length===0)return!1;let a=i.pop(),o=s.pop();return e(a,o)?n(i,s):n(i,[...s,o])},r=(i,s)=>{if(s.length===0||i.length===0)return!1;let a=i.pop(),o=s.pop();return e(a,o)&&n(i,s)},u=t.split(".");return i=>r([...i],[...u])},Xn=t=>{let n=(Array.isArray(t)?t:[t]).map(ur);return r=>n.every(u=>u(r))};function C(t){return t[t.length-1]}function Yc(t,e){return t.find(n=>y(n,e))}function Qn(t,e){for(let n=t.length-1;n>=0;n--){let r=t[n];if(y(r,e))return r}}function le(t){return Qn(t,"programNode")}function Hn(t){return Qn(t,"instructionNode")}function Wn(t,e){let n=(()=>{for(let r=t.length-1;r>=0;r--){let u=t[r];if(y(u,e))return r}return-1})();if(n!==-1)return t.slice(0,n+1)}function ei(t){return!!t&&t.length>0}function ve(t,e){return y(ei(t)?C(t):null,e)}function rs(t,e){p(ei(t)?C(t):null,e)}function ns(t){return t.map(e=>"name"in e?`[${e.kind}]${e.name}`:`[${e.kind}]`)}function is(t){return ns(t).join(" > ")}var q=class os{constructor(...e){He(this,"stack");this.stack=e.length===0?[[]]:[...e.map(n=>[...n])]}get currentPath(){return this.stack[this.stack.length-1]}push(e){this.currentPath.push(e)}pop(){return this.currentPath.pop()}peek(){return this.isEmpty()?void 0:this.currentPath[this.currentPath.length-1]}pushPath(e=[]){this.stack.push([...e])}popPath(){if(this.stack.length<=1)throw new V(Mt,{path:[...this.stack[this.stack.length-1]]});return[...this.stack.pop()]}getPath(e){let n=[...this.currentPath];return e&&rs(n,e),n}isEmpty(){return this.currentPath.length===0}clone(){return new os(...this.stack)}toString(){return is(this.getPath())}};function I(t,...e){return e.reduce((n,r)=>r(n),t)}function B(t,e){return oe(t,(n,r)=>{e.push(n);let u=r(n);return e.pop(),u})}function b(t,e={}){var u;let n=t.map(i=>typeof i=="function"?i:(s,a)=>Xn(i.select)(a.getPath(P))?i.transform(s,a):s),r=(u=e.stack)!=null?u:new q;return I(Ge(e),i=>oe(i,(s,a)=>n.reduce((o,c)=>o===null?null:c(o,r),a(s))),i=>B(i,r))}function Vt(t,e){let n=P.map(ie);return Object.fromEntries(Object.keys(t).flatMap(r=>{let u=r;return n.includes(u)?[[u,i=>e(t[u](i))]]:[]}))}function Zc(t){return Vt(t,e=>console.log(e))}function cr(t,e={}){var u;let n=t.map(i=>typeof i=="function"?i:(s,a)=>Xn(i.select)(a.getPath(P))?i.transform(s,a):s),r=(u=e.stack)!=null?u:new q;return I(Ge(e),i=>oe(i,(s,a)=>{let o=n.reduce((c,l)=>c===null?null:l(c,r),s);return o===null?null:a(o)}),i=>B(i,r))}function ti(t,e){return cr(t.map(n=>({select:n,transform:()=>null})),e)}function j(t,e){let n=P.map(ie),r=Object.fromEntries(Object.keys(e).flatMap(u=>{if(!n.includes(u))return[];let i=u;if(!t[i])throw new V(Ft,{visitFunction:i});return[[i,function(a){let o=e[i],c=t[i];return o.bind(this)(a,{next:c.bind(this),self:this})}]]}));return{...t,...r}}function fe(t,e,n={}){var s;let r=(s=n.keys)!=null?s:P,u=sr(t,{keys:r}),i=a=>o=>r.includes(o.kind)?[N(o,a)]:[];return r.includes("rootNode")&&(u.visitRoot=function(o){return e(o,te(o).flatMap(i(this)))}),r.includes("programNode")&&(u.visitProgram=function(o){return e(o,[...o.pdas.flatMap(i(this)),...o.accounts.flatMap(i(this)),...o.instructions.flatMap(i(this)),...o.definedTypes.flatMap(i(this)),...o.errors.flatMap(i(this))])}),r.includes("pdaNode")&&(u.visitPda=function(o){return e(o,o.seeds.flatMap(i(this)))}),r.includes("accountNode")&&(u.visitAccount=function(o){var c;return e(o,[...i(this)(o.data),...o.pda?i(this)(o.pda):[],...((c=o.discriminators)!=null?c:[]).flatMap(i(this))])}),r.includes("instructionNode")&&(u.visitInstruction=function(o){var c,l,d,f,m;return e(o,[...o.accounts.flatMap(i(this)),...o.arguments.flatMap(i(this)),...((c=o.extraArguments)!=null?c:[]).flatMap(i(this)),...((l=o.remainingAccounts)!=null?l:[]).flatMap(i(this)),...((d=o.byteDeltas)!=null?d:[]).flatMap(i(this)),...((f=o.discriminators)!=null?f:[]).flatMap(i(this)),...((m=o.subInstructions)!=null?m:[]).flatMap(i(this))])}),r.includes("instructionAccountNode")&&(u.visitInstructionAccount=function(o){return e(o,[...o.defaultValue?i(this)(o.defaultValue):[]])}),r.includes("instructionArgumentNode")&&(u.visitInstructionArgument=function(o){return e(o,[...i(this)(o.type),...o.defaultValue?i(this)(o.defaultValue):[]])}),r.includes("instructionRemainingAccountsNode")&&(u.visitInstructionRemainingAccounts=function(o){return e(o,i(this)(o.value))}),r.includes("instructionByteDeltaNode")&&(u.visitInstructionByteDelta=function(o){return e(o,i(this)(o.value))}),r.includes("definedTypeNode")&&(u.visitDefinedType=function(o){return e(o,i(this)(o.type))}),r.includes("arrayTypeNode")&&(u.visitArrayType=function(o){return e(o,[...i(this)(o.count),...i(this)(o.item)])}),r.includes("enumTypeNode")&&(u.visitEnumType=function(o){return e(o,[...i(this)(o.size),...o.variants.flatMap(i(this))])}),r.includes("enumStructVariantTypeNode")&&(u.visitEnumStructVariantType=function(o){return e(o,i(this)(o.struct))}),r.includes("enumTupleVariantTypeNode")&&(u.visitEnumTupleVariantType=function(o){return e(o,i(this)(o.tuple))}),r.includes("mapTypeNode")&&(u.visitMapType=function(o){return e(o,[...i(this)(o.count),...i(this)(o.key),...i(this)(o.value)])}),r.includes("optionTypeNode")&&(u.visitOptionType=function(o){return e(o,[...i(this)(o.prefix),...i(this)(o.item)])}),r.includes("zeroableOptionTypeNode")&&(u.visitZeroableOptionType=function(o){return e(o,[...i(this)(o.item),...o.zeroValue?i(this)(o.zeroValue):[]])}),r.includes("remainderOptionTypeNode")&&(u.visitRemainderOptionType=function(o){return e(o,i(this)(o.item))}),r.includes("booleanTypeNode")&&(u.visitBooleanType=function(o){return e(o,i(this)(o.size))}),r.includes("setTypeNode")&&(u.visitSetType=function(o){return e(o,[...i(this)(o.count),...i(this)(o.item)])}),r.includes("structTypeNode")&&(u.visitStructType=function(o){return e(o,o.fields.flatMap(i(this)))}),r.includes("structFieldTypeNode")&&(u.visitStructFieldType=function(o){return e(o,[...i(this)(o.type),...o.defaultValue?i(this)(o.defaultValue):[]])}),r.includes("tupleTypeNode")&&(u.visitTupleType=function(o){return e(o,o.items.flatMap(i(this)))}),r.includes("amountTypeNode")&&(u.visitAmountType=function(o){return e(o,i(this)(o.number))}),r.includes("dateTimeTypeNode")&&(u.visitDateTimeType=function(o){return e(o,i(this)(o.number))}),r.includes("solAmountTypeNode")&&(u.visitSolAmountType=function(o){return e(o,i(this)(o.number))}),r.includes("prefixedCountNode")&&(u.visitPrefixedCount=function(o){return e(o,i(this)(o.prefix))}),r.includes("arrayValueNode")&&(u.visitArrayValue=function(o){return e(o,o.items.flatMap(i(this)))}),r.includes("constantValueNode")&&(u.visitConstantValue=function(o){return e(o,[...i(this)(o.type),...i(this)(o.value)])}),r.includes("enumValueNode")&&(u.visitEnumValue=function(o){return e(o,[...i(this)(o.enum),...o.value?i(this)(o.value):[]])}),r.includes("mapValueNode")&&(u.visitMapValue=function(o){return e(o,o.entries.flatMap(i(this)))}),r.includes("mapEntryValueNode")&&(u.visitMapEntryValue=function(o){return e(o,[...i(this)(o.key),...i(this)(o.value)])}),r.includes("setValueNode")&&(u.visitSetValue=function(o){return e(o,o.items.flatMap(i(this)))}),r.includes("someValueNode")&&(u.visitSomeValue=function(o){return e(o,i(this)(o.value))}),r.includes("structValueNode")&&(u.visitStructValue=function(o){return e(o,o.fields.flatMap(i(this)))}),r.includes("structFieldValueNode")&&(u.visitStructFieldValue=function(o){return e(o,i(this)(o.value))}),r.includes("tupleValueNode")&&(u.visitTupleValue=function(o){return e(o,o.items.flatMap(i(this)))}),r.includes("constantPdaSeedNode")&&(u.visitConstantPdaSeed=function(o){return e(o,[...i(this)(o.type),...i(this)(o.value)])}),r.includes("variablePdaSeedNode")&&(u.visitVariablePdaSeed=function(o){return e(o,i(this)(o.type))}),r.includes("resolverValueNode")&&(u.visitResolverValue=function(o){var c;return e(o,((c=o.dependsOn)!=null?c:[]).flatMap(i(this)))}),r.includes("conditionalValueNode")&&(u.visitConditionalValue=function(o){return e(o,[...i(this)(o.condition),...o.value?i(this)(o.value):[],...o.ifTrue?i(this)(o.ifTrue):[],...o.ifFalse?i(this)(o.ifFalse):[]])}),r.includes("pdaValueNode")&&(u.visitPdaValue=function(o){return e(o,[...i(this)(o.pda),...o.seeds.flatMap(i(this))])}),r.includes("pdaSeedValueNode")&&(u.visitPdaSeedValue=function(o){return e(o,i(this)(o.value))}),r.includes("fixedSizeTypeNode")&&(u.visitFixedSizeType=function(o){return e(o,i(this)(o.type))}),r.includes("sizePrefixTypeNode")&&(u.visitSizePrefixType=function(o){return e(o,[...i(this)(o.prefix),...i(this)(o.type)])}),r.includes("preOffsetTypeNode")&&(u.visitPreOffsetType=function(o){return e(o,i(this)(o.type))}),r.includes("postOffsetTypeNode")&&(u.visitPostOffsetType=function(o){return e(o,i(this)(o.type))}),r.includes("sentinelTypeNode")&&(u.visitSentinelType=function(o){return e(o,[...i(this)(o.sentinel),...i(this)(o.type)])}),r.includes("hiddenPrefixTypeNode")&&(u.visitHiddenPrefixType=function(o){return e(o,[...o.prefix.flatMap(i(this)),...i(this)(o.type)])}),r.includes("hiddenSuffixTypeNode")&&(u.visitHiddenSuffixType=function(o){return e(o,[...i(this)(o.type),...o.suffix.flatMap(i(this))])}),r.includes("constantDiscriminatorNode")&&(u.visitConstantDiscriminator=function(o){return e(o,i(this)(o.constant))}),r.includes("accountLinkNode")&&(u.visitAccountLink=function(o){return e(o,o.program?i(this)(o.program):[])}),r.includes("definedTypeLinkNode")&&(u.visitDefinedTypeLink=function(o){return e(o,o.program?i(this)(o.program):[])}),r.includes("instructionLinkNode")&&(u.visitInstructionLink=function(o){return e(o,o.program?i(this)(o.program):[])}),r.includes("instructionAccountLinkNode")&&(u.visitInstructionAccountLink=function(o){return e(o,o.instruction?i(this)(o.instruction):[])}),r.includes("instructionArgumentLinkNode")&&(u.visitInstructionArgumentLink=function(o){return e(o,o.instruction?i(this)(o.instruction):[])}),r.includes("pdaLinkNode")&&(u.visitPdaLink=function(o){return e(o,o.program?i(this)(o.program):[])}),u}function ri(t,e={}){var a;let n=(a=e.stack)!=null?a:new q,r=new Map,u=[],i=o=>o.reduce((c,l)=>c===null||l===null?null:c+l,0),s=fe(()=>null,(o,c)=>i(c),{keys:[...Pe,"accountNode","constantValueNode","definedTypeLinkNode","definedTypeNode","instructionArgumentNode","instructionNode"]});return I(s,o=>j(o,{visitAccount(c,{self:l}){return N(c.data,l)},visitArrayType(c,{self:l}){return Gn(c.count,N(c.item,l),l)},visitConstantValue(c,{self:l}){let d=N(c.type,l);return d!==null?d:y(c.value,"bytesValueNode")&&c.value.encoding==="base16"?Math.ceil(c.value.data.length/2):y(c.type,"stringTypeNode")&&c.type.encoding==="base16"&&y(c.value,"stringValueNode")?Math.ceil(c.value.string.length/2):null},visitDefinedType(c,{self:l}){if(r.has(c.name))return r.get(c.name);u.push(c.name);let d=N(c.type,l);return u.pop(),r.set(c.name,d),d},visitDefinedTypeLink(c,{self:l}){let d=t.getPath(n.getPath(c.kind));if(!d)return null;let f=C(d);if(u.includes(f.name))return null;n.pushPath(d);let m=N(f,l);return n.popPath(),m},visitEnumEmptyVariantType(){return 0},visitEnumType(c,{self:l}){let d=N(c.size,l);if(d===null)return null;if(ke(c))return d;let f=c.variants.map(v=>N(v,l));return f.every((v,A,k)=>v===k[0])&&f.length>0&&f[0]!==null?f[0]+d:null},visitFixedSizeType(c){return c.size},visitInstruction(c,{self:l}){return i(c.arguments.map(d=>N(d,l)))},visitInstructionArgument(c,{self:l}){return N(c.type,l)},visitMapType(c,{self:l}){let d=i([N(c.key,l),N(c.value,l)]);return Gn(c.count,d,l)},visitNumberType(c){return c.format==="shortU16"?null:parseInt(c.format.slice(1),10)/8},visitOptionType(c,{self:l}){return c.fixed?i([N(c.prefix,l),N(c.item,l)]):null},visitPostOffsetType(c,{self:l}){let d=N(c.type,l);return c.strategy==="padded"?i([d,c.offset]):d},visitPreOffsetType(c,{self:l}){let d=N(c.type,l);return c.strategy==="padded"?i([d,c.offset]):d},visitPublicKeyType(){return 32},visitRemainderOptionType(c,{self:l}){return N(c.item,l)===0?0:null},visitSetType(c,{self:l}){return Gn(c.count,N(c.item,l),l)},visitZeroableOptionType(c,{self:l}){let d=N(c.item,l);return c.zeroValue?N(c.zeroValue,l)===d?d:null:d}}),o=>B(o,n))}function Gn(t,e,n){return e===0&&y(t,"prefixedCountNode")?N(t.prefix,n):e===0?0:y(t,"fixedCountNode")?t.value===0?0:e!==null?e*t.value:null:null}function Xc(t={}){var u,i;let e=(u=t.indent)!=null?u:!1,n=(i=t.indentSeparator)!=null?i:"|   ",r=-1;return I(fe(s=>{let a=ts(s).join(".");return e?`${n.repeat(r)}${s.kind}${a?` [${a}]`:""}`:`${s.kind}${a?`[${a}]`:""}`},(s,a)=>{let o=ts(s).join(".");return e?[`${n.repeat(r)}${s.kind}${o?` [${o}]`:""}`,...a].join(`
`):`${s.kind}${o?`[${o}]`:""}(${a.join(", ")})`}),s=>oe(s,(a,o)=>{r+=1;let c=o(a);return r-=1,c}))}function ts(t){var e,n;switch(t.kind){case"programNode":return[t.name,t.publicKey];case"instructionAccountNode":return[t.name,...t.isWritable?["writable"]:[],...t.isSigner===!0?["signer"]:[],...t.isSigner==="either"?["optionalSigner"]:[],...t.isOptional?["optional"]:[]];case"instructionRemainingAccountsNode":return[...t.isOptional?["optional"]:[],...t.isWritable?["writable"]:[],...t.isSigner===!0?["signer"]:[],...t.isSigner==="either"?["optionalSigner"]:[]];case"instructionByteDeltaNode":return[...t.subtract?["subtract"]:[],...t.withHeader?["withHeader"]:[]];case"errorNode":return[t.code.toString(),t.name];case"accountLinkNode":case"definedTypeLinkNode":case"instructionAccountLinkNode":case"instructionArgumentLinkNode":case"instructionLinkNode":case"pdaLinkNode":case"programLinkNode":return[t.name];case"numberTypeNode":return[t.format,...t.endian==="be"?["bigEndian"]:[]];case"amountTypeNode":return[t.decimals.toString(),...t.unit?[t.unit]:[]];case"stringTypeNode":return[t.encoding];case"optionTypeNode":return t.fixed?["fixed"]:[];case"fixedCountNode":return[t.value.toString()];case"numberValueNode":return[t.number.toString()];case"stringValueNode":return[t.string];case"booleanValueNode":return[t.boolean?"true":"false"];case"bytesValueNode":return[t.encoding,t.data];case"publicKeyValueNode":return[...t.identifier?[`${t.identifier}`]:[],t.publicKey];case"enumValueNode":return[t.variant];case"resolverValueNode":return[t.name];case"constantDiscriminatorNode":return[...t.offset>0?[`offset:${t.offset}`]:[]];case"fieldDiscriminatorNode":return[t.name,...t.offset>0?[`offset:${t.offset}`]:[]];case"sizeDiscriminatorNode":return[t.size.toString()];case"fixedSizeTypeNode":return[t.size.toString()];case"preOffsetTypeNode":return[t.offset.toString(),(e=t.strategy)!=null?e:"relative"];case"postOffsetTypeNode":return[t.offset.toString(),(n=t.strategy)!=null?n:"relative"];default:return"name"in t?[t.name]:[]}}function Qc(t,e={}){var a;let n=(a=e.stack)!=null?a:new q,r=new Map,u=[],i=o=>o.reduce((c,l)=>c===null||l===null?null:c+l,0),s=fe(()=>null,(o,c)=>i(c),{keys:[...Pe,"accountNode","constantValueNode","definedTypeLinkNode","definedTypeNode","instructionArgumentNode","instructionNode"]});return I(s,o=>j(o,{visitAccount(c,{self:l}){return N(c.data,l)},visitArrayType(c,{self:l}){return Kn(c.count,N(c.item,l),l)},visitConstantValue(c,{self:l}){let d=N(c.type,l);return d!==null?d:y(c.value,"bytesValueNode")&&c.value.encoding==="base16"?Math.ceil(c.value.data.length/2):y(c.type,"stringTypeNode")&&c.type.encoding==="base16"&&y(c.value,"stringValueNode")?Math.ceil(c.value.string.length/2):null},visitDefinedType(c,{self:l}){if(r.has(c.name))return r.get(c.name);u.push(c.name);let d=N(c.type,l);return u.pop(),r.set(c.name,d),d},visitDefinedTypeLink(c,{self:l}){let d=t.getPath(n.getPath(c.kind));if(!d)return null;let f=C(d);if(u.includes(f.name))return null;n.pushPath(d);let m=N(f,l);return n.popPath(),m},visitEnumEmptyVariantType(){return 0},visitEnumType(c,{self:l}){let d=N(c.size,l);if(d===null)return null;if(ke(c))return d;let f=c.variants.map(v=>N(v,l));if(f.includes(null))return null;let m=Math.max(...f);return d+m},visitFixedSizeType(c){return c.size},visitInstruction(c,{self:l}){return i(c.arguments.map(d=>N(d,l)))},visitInstructionArgument(c,{self:l}){return N(c.type,l)},visitMapType(c,{self:l}){let d=i([N(c.key,l),N(c.value,l)]);return Kn(c.count,d,l)},visitNumberType(c){return c.format==="shortU16"?3:parseInt(c.format.slice(1),10)/8},visitOptionType(c,{self:l}){return i([N(c.prefix,l),N(c.item,l)])},visitPostOffsetType(c,{self:l}){let d=N(c.type,l);return c.strategy==="padded"?i([d,c.offset]):d},visitPreOffsetType(c,{self:l}){let d=N(c.type,l);return c.strategy==="padded"?i([d,c.offset]):d},visitPublicKeyType(){return 32},visitRemainderOptionType(c,{self:l}){return N(c.item,l)===0?0:null},visitSetType(c,{self:l}){return Kn(c.count,N(c.item,l),l)},visitZeroableOptionType(c,{self:l}){let d=N(c.item,l);if(!c.zeroValue)return d;let f=N(c.zeroValue,l);return d===null||f===null?null:Math.max(d,f)}}),o=>B(o,n))}function Kn(t,e,n){return e===0&&y(t,"prefixedCountNode")?N(t.prefix,n):e===0?0:y(t,"fixedCountNode")?t.value===0?0:e!==null?e*t.value:null:null}function ni(t,e){let n={};return n[ie(t)]=e,n}function Ie(t){return ni("rootNode",t)}function ii(t={}){var l;let e=(l=t.includeDataArgumentValueNodes)!=null?l:!1,n=[],r=[],u=new Map,i=new Map;function s(d,f){if(y(f,"instructionAccountNode")&&u.has(f.name)||y(f,"instructionArgumentNode")&&i.has(f.name))return;if(n.some(({kind:A,name:k})=>A===f.kind&&k===f.name)){let A=[...n,f];throw new V(Pt,{cycle:A,formattedCycle:A.map(({name:k})=>k).join(" -> "),instruction:d,instructionName:d.name})}n.push(f);let v=f.kind==="instructionAccountNode"?a(d,f):o(d,f);n.pop(),r.push(v),v.kind==="instructionAccountNode"?u.set(f.name,v):i.set(f.name,v)}function a(d,f){var A;let m=be(f);c(d,f,m);let v={...f,dependsOn:m,isPda:re(d).some(k=>y(k.defaultValue,"accountBumpValueNode")&&k.defaultValue.name===f.name),resolvedIsOptional:!!f.isOptional,resolvedIsSigner:f.isSigner};switch((A=v.defaultValue)==null?void 0:A.kind){case"accountValueNode":let k=u.get(v.defaultValue.name),X=f.isSigner===!1&&k.isSigner===!1,$=f.isSigner===!0&&k.isSigner===!0,fr=!X&&!$;v.resolvedIsSigner=fr?"either":$,v.resolvedIsOptional=!!k.isOptional;break;case"publicKeyValueNode":case"programLinkNode":case"programIdValueNode":v.resolvedIsSigner=f.isSigner===!1?!1:"either",v.resolvedIsOptional=!1;break;case"pdaValueNode":v.resolvedIsSigner=f.isSigner===!1?!1:"either",v.resolvedIsOptional=!1;let{seeds:Ot}=v.defaultValue;Ot.forEach(K=>{if(!y(K.value,"accountValueNode"))return;if(u.get(K.value.name).resolvedIsOptional)throw new V(Ct,{instruction:d,instructionAccount:f,instructionAccountName:f.name,instructionName:d.name,seed:K,seedName:K.name,seedValueName:K.value.name})});break;case"identityValueNode":case"payerValueNode":case"resolverValueNode":v.resolvedIsOptional=!1;break;default:break}return v}function o(d,f){let m=be(f);return c(d,f,m),{...f,dependsOn:m}}function c(d,f,m){m.forEach(v=>{let A=null;if(y(v,"accountValueNode")){let k=d.accounts.find(X=>X.name===v.name);if(!k)throw new V(We,{dependency:v,dependencyKind:v.kind,dependencyName:v.name,instruction:d,instructionName:d.name,parent:f,parentKind:f.kind,parentName:f.name});A={...k}}else if(y(v,"argumentValueNode")){let k=re(d).find(X=>X.name===v.name);if(!k)throw new V(We,{dependency:v,dependencyKind:v.kind,dependencyName:v.name,instruction:d,instructionName:d.name,parent:f,parentKind:f.kind,parentName:f.name});A={...k}}A&&s(d,A)})}return ni("instructionNode",d=>{var m;return n=[],r=[],u=new Map,i=new Map,[...d.accounts,...d.arguments.filter(v=>e?v.defaultValue:v.defaultValue&&!y(v.defaultValue,w)),...((m=d.extraArguments)!=null?m:[]).filter(v=>v.defaultValue)].forEach(v=>{s(d,v)}),r})}function Jn(t){let e=new Map,n=new Map;return t.forEach(r=>{y(r,"accountValueNode")?e.set(r.name,r):y(r,"argumentValueNode")&&n.set(r.name,r)}),[...e.values(),...n.values()]}function be(t){var n,r;if(y(t,"instructionNode"))return Jn([...t.accounts.flatMap(be),...t.arguments.flatMap(be),...((n=t.extraArguments)!=null?n:[]).flatMap(be)]);if(!t.defaultValue)return[];let e=u=>u?be({...t,defaultValue:u}):[];if(y(t.defaultValue,["accountValueNode","accountBumpValueNode"]))return[Ye(t.defaultValue.name)];if(y(t.defaultValue,["argumentValueNode"]))return[Ze(t.defaultValue.name)];if(y(t.defaultValue,"pdaValueNode")){let u=new Map;return t.defaultValue.seeds.forEach(i=>{y(i.value,["accountValueNode","argumentValueNode"])&&u.set(i.value.name,{...i.value})}),[...u.values()]}return y(t.defaultValue,"resolverValueNode")?(r=t.defaultValue.dependsOn)!=null?r:[]:y(t.defaultValue,"conditionalValueNode")?Jn([...e(t.defaultValue.condition),...e(t.defaultValue.ifTrue),...e(t.defaultValue.ifFalse)]):[]}function ae(t={}){return Ge(t)}function as(t={}){return oe(ae(t),(e,n)=>"docs"in e?n({...e,docs:[]}):n(e))}function oi(t={}){var n;return((n=t.removeDocs)!=null?n:!1)?Vt(as(),r=>(0,Yn.default)(r)):sr(r=>(0,Yn.default)(r))}function ss(t,e){let n=!0;return oe(t,(r,u)=>{try{if(n){n=!1;let i=e(r,u);return n=!0,i}return u(r)}catch(i){throw n=!0,i}})}var Zn=["accountNode","definedTypeNode","instructionAccountNode","instructionArgumentNode","instructionNode","pdaNode","programNode"],U=class{constructor(){He(this,"programs",new Map)}recordPath(t){let e=C(t),n=this.getOrCreateProgramDictionary(t);if(!n)return this;let r=this.getOrCreateInstructionDictionary(n,t);return ve(t,"accountNode")?n.accounts.set(e.name,t):ve(t,"definedTypeNode")?n.definedTypes.set(e.name,t):ve(t,"pdaNode")?n.pdas.set(e.name,t):r&&ve(t,"instructionAccountNode")?r.accounts.set(e.name,t):r&&ve(t,"instructionArgumentNode")&&r.arguments.set(e.name,t),this}getPathOrThrow(t){let e=this.getPath(t);if(!e){let n=C(t);throw new V(_t,{kind:n.kind,linkNode:n,name:n.name,path:t})}return e}getPath(t){let e=C(t),n=this.getProgramDictionary(t);if(!n)return;let r=this.getInstructionDictionary(n,t);if(y(e,"accountLinkNode"))return n.accounts.get(e.name);if(y(e,"definedTypeLinkNode"))return n.definedTypes.get(e.name);if(y(e,"instructionAccountLinkNode"))return r==null?void 0:r.accounts.get(e.name);if(y(e,"instructionArgumentLinkNode"))return r==null?void 0:r.arguments.get(e.name);if(y(e,"instructionLinkNode"))return r==null?void 0:r.instruction;if(y(e,"pdaLinkNode"))return n.pdas.get(e.name);if(y(e,"programLinkNode"))return n.program}getOrThrow(t){return C(this.getPathOrThrow(t))}get(t){let e=this.getPath(t);return e?C(e):void 0}has(t){let e=C(t),n=this.getProgramDictionary(t);if(!n)return!1;let r=this.getInstructionDictionary(n,t);return y(e,"accountLinkNode")?n.accounts.has(e.name):y(e,"definedTypeLinkNode")?n.definedTypes.has(e.name):y(e,"instructionAccountLinkNode")?!!r&&r.accounts.has(e.name):y(e,"instructionArgumentLinkNode")?!!r&&r.arguments.has(e.name):y(e,"instructionLinkNode")?n.instructions.has(e.name):y(e,"pdaLinkNode")?n.pdas.has(e.name):!!y(e,"programLinkNode")}getOrCreateProgramDictionary(t){let e=C(t),n=y(e,"programNode")?e:le(t);if(!n)return;let r=this.programs.get(n.name);return r||(r={accounts:new Map,definedTypes:new Map,instructions:new Map,pdas:new Map,program:Wn(t,"programNode")},this.programs.set(n.name,r)),r}getOrCreateInstructionDictionary(t,e){let n=C(e),r=y(n,"instructionNode")?n:Hn(e);if(!r)return;let u=t.instructions.get(r.name);return u||(u={accounts:new Map,arguments:new Map,instruction:Wn(e,"instructionNode")},t.instructions.set(r.name,u)),u}getProgramDictionary(t){var r,u,i,s;let e=C(t),n;return y(e,"programLinkNode")?n=e.name:"program"in e?n=(r=e.program)==null?void 0:r.name:"instruction"in e&&(n=(i=(u=e.instruction)==null?void 0:u.program)==null?void 0:i.name),n=n!=null?n:(s=le(t))==null?void 0:s.name,n?this.programs.get(n):void 0}getInstructionDictionary(t,e){var u,i;let n=C(e),r;return y(n,"instructionLinkNode")?r=n.name:"instruction"in n&&(r=(u=n.instruction)==null?void 0:u.name),r=r!=null?r:(i=Hn(e))==null?void 0:i.name,r?t.instructions.get(r):void 0}};function us(t={}){return fe(()=>{},()=>{},t)}function lr(t){let e=new q;return I(us(),n=>oe(n,(r,u)=>(y(r,Zn)&&t.recordPath(e.getPath(Zn)),u(r))),n=>B(n,e))}function G(t,e){let n=lr(e);return I(t,r=>ss(r,(u,i)=>(N(u,n),i(u))))}function el(t,e,n){let r={...t};return r[ie(e)]=function(i){return n(i),t[ie(e)].bind(this)(i)},r}var cs=["debug","trace","info","warn","error"];function R(t,e,n,r){return{level:t,message:e,node:n,path:Array.isArray(r)?r:r.getPath()}}var St=t=>cs.indexOf(t);function tl(){let t=new U,e=new q;return I(fe(()=>[],(n,r)=>r.flat()),n=>G(n,t),n=>B(n,e),n=>j(n,{visitAccount(r,{next:u}){let i=[];return r.name||i.push(R("error","Account has no name.",r,e)),[...i,...u(r)]},visitDefinedType(r,{next:u}){let i=[];return r.name||i.push(R("error","Defined type has no name.",r,e)),[...i,...u(r)]},visitDefinedTypeLink(r,{next:u}){let i=[];return r.name?t.has(e.getPath(r.kind))||i.push(R("error",`Pointing to a missing defined type named "${r.name}"`,r,e)):i.push(R("error","Pointing to a defined type with no name.",r,e)),[...i,...u(r)]},visitEnumEmptyVariantType(r,{next:u}){let i=[];return r.name||i.push(R("error","Enum variant has no name.",r,e)),[...i,...u(r)]},visitEnumStructVariantType(r,{next:u}){let i=[];return r.name||i.push(R("error","Enum variant has no name.",r,e)),[...i,...u(r)]},visitEnumTupleVariantType(r,{next:u}){let i=[];return r.name||i.push(R("error","Enum variant has no name.",r,e)),[...i,...u(r)]},visitEnumType(r,{next:u}){let i=[];return r.variants.length===0&&i.push(R("warn","Enum has no variants.",r,e)),r.variants.forEach(s=>{s.name||i.push(R("error","Enum variant has no name.",r,e))}),[...i,...u(r)]},visitError(r,{next:u}){let i=[];return r.name||i.push(R("error","Error has no name.",r,e)),typeof r.code!="number"&&i.push(R("error","Error has no code.",r,e)),r.message||i.push(R("warn","Error has no message.",r,e)),[...i,...u(r)]},visitInstruction(r,{next:u}){let i=[];r.name||i.push(R("error","Instruction has no name.",r,e));let s=new Map;r.accounts.forEach(f=>{var v;if(!f.name){i.push(R("error","Instruction account has no name.",r,e));return}let m=((v=s.get(f.name))!=null?v:0)+1;s.set(f.name,m),m===2&&i.push(R("error",`Account name "${f.name}" is not unique in instruction "${r.name}".`,r,e))});let a=ii();try{N(r,a)}catch(f){i.push(R("error",f.message,r,e))}let c=re(r).map(({name:f})=>g(f)).filter((f,m,v)=>v.indexOf(f)!==m),l=[...new Set(c)];return l.length>0&&i.push(R("error",`The names of the following instruction arguments are conflicting: [${l.join(", ")}].`,r,e)),re(r).forEach(f=>{let{defaultValue:m}=f;if(y(m,"accountBumpValueNode")){let v=r.accounts.find(A=>A.name===m.name);v&&v.isSigner!==!1&&i.push(R("error",`Argument ${f.name} cannot default to the bump attribute of the [${m.name}] account as it may be a Signer.`,r,e))}}),[...i,...u(r)]},visitProgram(r,{next:u}){let i=[];return r.name||i.push(R("error","Program has no name.",r,e)),r.publicKey||i.push(R("error","Program has no public key.",r,e)),r.version||i.push(R("warn","Program has no version.",r,e)),r.origin||i.push(R("info","Program has no origin.",r,e)),[...i,...u(r)]},visitStructFieldType(r,{next:u}){let i=[];return r.name||i.push(R("error","Struct field has no name.",r,e)),[...i,...u(r)]},visitStructType(r,{next:u}){let i=[],s=new Map;return r.fields.forEach(a=>{var c;if(!a.name)return;let o=((c=s.get(a.name))!=null?c:0)+1;s.set(a.name,o),o===2&&i.push(R("error",`Struct field name "${a.name}" is not unique.`,a,e))}),[...i,...u(r)]},visitTupleType(r,{next:u}){let i=[];return r.items.length===0&&i.push(R("warn","Tuple has no items.",r,e)),[...i,...u(r)]}}))}function rl(t,e="error"){return Vt(t,n=>{let r=[...n].sort((i,s)=>St(s.level)-St(i.level)).reduce((i,s)=>{var a;return i[s.level]=((a=i[s.level])!=null?a:0)+1,i},{});if(Object.keys(r).map(i=>St(i)).sort((i,s)=>s-i)[0]>=St(e)){let i=Object.keys(r).map(s=>`${s}s: ${r[s]}`).join(", ");throw new V(Lt,{formattedHistogram:i,validationItems:n})}})}function nl(t){return b(Object.entries(t).map(([e,n])=>({select:`[programNode]${g(e)}`,transform:u=>{p(u,"programNode");let i=new Set(u.pdas.map(o=>o.name)),s=new Set(n.map(o=>o.name)),a=new Set([...i].filter(o=>s.has(o)));if(a.size>0)throw new V(Rt,{duplicatedPdaNames:[...a],program:u,programName:u.name});return J({...u,pdas:[...u.pdas,...n.map(({name:o,seeds:c,docs:l})=>ne({docs:l,name:o,seeds:c}))]})}})))}function il(){return b([{select:"[instructionNode]",transform:t=>(p(t,"instructionNode"),z({...t,arguments:ai(t.arguments)}))}])}var ai=(t,e="*")=>{let n=e==="*"?e:e.map(g),r=c=>e==="*"||n.includes(g(c.name)),u=t.flatMap(c=>y(c.type,"structTypeNode")&&r(c)?c.type.fields.map(l=>F({...l})):c),s=u.map(c=>c.name).filter((c,l,d)=>d.indexOf(c)!==l),a=[...new Set(s)],o=a.length>0;if(o)throw new V(_e,{conflictingAttributes:a});return o?t:u};function ol(t){let e=new U,n=b(Object.entries(t).map(([r,u])=>({select:["[instructionNode]",r],transform:(i,s)=>{var m,v;p(i,"instructionNode");let a=i.arguments,o=g(u),c=a.findIndex(A=>A.name===o),l=c>=0?a[c]:null;if(!l)throw new V(Je,{argumentName:o,instruction:i,instructionName:i.name});let d;if(y(l.type,"enumTypeNode"))d=l.type;else if(y(l.type,"definedTypeLinkNode")&&e.has([...s.getPath(),l.type])){let A=(m=e.get([...s.getPath(),l.type]))==null?void 0:m.type;p(A,"enumTypeNode"),d=A}else throw new V(Je,{argumentName:o,instruction:i,instructionName:i.name});let f=d.variants.map((A,k)=>{let X=g(`${i.name} ${A.name}`),$=a.slice(0,c);return $.push(F({defaultValue:tn(k),defaultValueStrategy:"omitted",name:`${X}Discriminator`,type:pe("u8")})),y(A,"enumStructVariantTypeNode")?$.push(F({...l,type:A.struct})):y(A,"enumTupleVariantTypeNode")&&$.push(F({...l,type:A.tuple})),$.push(...a.slice(c+1)),z({...i,arguments:ai($),name:X})});return z({...i,subInstructions:[...(v=i.subInstructions)!=null?v:[],...f]})}})));return I(n,r=>G(r,e))}function al(){return Ie(t=>{let e=new Map,n=te(t);n.forEach(i=>{i.definedTypes.forEach(s=>{var c;let a={program:i,type:s},o=(c=e.get(s.name))!=null?c:[];e.set(s.name,[...o,a])})}),e.forEach((i,s)=>{i.length<=1&&e.delete(s)});let r=oi({removeDocs:!0});e.forEach((i,s)=>{i.map(c=>N(c.type,r)).every((c,l,d)=>c===d[0])||e.delete(s)});let u=Array.from(e.values()).flatMap(i=>{let s=i.sort((o,c)=>n.indexOf(o.program)-n.indexOf(c.program)),[,...a]=s;return a}).map(({program:i,type:s})=>`[programNode]${i.name}.[definedTypeNode]${s.name}`);if(u.length>0){let i=N(t,ti(u));return p(i,"rootNode"),i}return t})}function si(t,e,n=!1){let r=C(t);return I(Ge({keys:de}),u=>j(u,{visitPdaValue(i,{next:s}){let a=s(i);p(a,"pdaValueNode");let o=y(a.pda,"pdaNode")?a.pda:e.get([...t,a.pda]);if(!o)return a;let c=sl(r,o,a.seeds);if(n&&!cl(r,o,c))throw new V(kt,{instruction:r,instructionName:r.name,pda:o,pdaName:o.name});return et(a.pda,c)}}))}function sl(t,e,n){let r=new Set(n.map(i=>i.name)),u=ul(t,e).filter(i=>!r.has(i.name));return[...n,...u]}function ul(t,e){return e.seeds.flatMap(n=>{if(!y(n,"variablePdaSeedNode"))return[];let r=t.accounts.some(i=>i.name===n.name);return y(n.type,"publicKeyTypeNode")&&r?[De(n.name,Ye(n.name))]:re(t).some(i=>i.name===n.name)?[De(n.name,Ze(n.name))]:[]})}function cl(t,e,n){let r=e.seeds.filter(Ur("variablePdaSeedNode")).length===n.length,u=t.accounts.map(a=>a.name),i=re(t).map(a=>a.name),s=n.every(a=>y(a.value,"accountValueNode")?u.includes(a.value.name):y(a.value,"argumentValueNode")?i.includes(a.value.name):!0);return r&&s}function ll(t){return b(Object.entries(t).map(([e,n])=>({select:`${e}.[structTypeNode]`,transform:r=>fs(r,n)})))}var fs=(t,e="*")=>{p(t,"structTypeNode");let n=e==="*"?e:e.map(g),r=c=>e==="*"||n.includes(g(c.name)),u=t.fields.flatMap(c=>y(c.type,"structTypeNode")&&r(c)?c.type.fields:[c]),s=u.map(c=>c.name).filter((c,l,d)=>d.indexOf(c)!==l),a=[...new Set(s)],o=a.length>0;if(o)throw new V(_e,{conflictingAttributes:a});return o?t:W(u)};function ls(t){let e={};return t.forEach(n=>{Object.keys(n).forEach(r=>{let u=r;e[u]===void 0?e[u]=n[u]:(e[u].total+=n[u].total,e[u].inAccounts+=n[u].inAccounts,e[u].inDefinedTypes+=n[u].inDefinedTypes,e[u].inInstructionArgs+=n[u].inInstructionArgs,e[u].directlyAsInstructionArgs+=n[u].directlyAsInstructionArgs)})}),e}function ui(){let t=new q,e=null,n=0;return I(fe(()=>({}),(r,u)=>ls(u)),r=>oe(r,(u,i)=>{n+=1;let s=i(u);return n-=1,s}),r=>j(r,{visitAccount(u,{self:i}){e="account",n=0;let s=N(u.data,i);return e=null,s},visitDefinedType(u,{self:i}){e="definedType",n=0;let s=N(u.type,i);return e=null,s},visitDefinedTypeLink(u){let i=le(t.getPath());return{[i?`${i.name}.${u.name}`:u.name]:{directlyAsInstructionArgs:+(e==="instruction"&&n<=1),inAccounts:+(e==="account"),inDefinedTypes:+(e==="definedType"),inInstructionArgs:+(e==="instruction"),total:1}}},visitInstruction(u,{self:i}){var c,l;e="instruction",n=0;let s=u.arguments.map(d=>N(d,i)),a=((c=u.extraArguments)!=null?c:[]).map(d=>N(d,i));e=null;let o=((l=u.subInstructions)!=null?l:[]).map(d=>N(d,i));return ls([...s,...a,...o])}}),r=>B(r,t))}function fl(t){return b(Object.entries(t).map(([e,{field:n,value:r,offset:u}])=>({select:["[accountNode]",e],transform:i=>{var c;p(i,"accountNode");let s=Ae(i.data),a=s.fields.findIndex(l=>l.name===n);if(a<0)throw new V(xt,{account:i,missingField:n,name:i.name});let o=s.fields[a];return ee({...i,data:me(i.data,()=>W([...s.fields.slice(0,a),Z({...o,defaultValue:r,defaultValueStrategy:"omitted"}),...s.fields.slice(a+1)])),discriminators:[rt(n,u),...(c=i.discriminators)!=null?c:[]]})}})))}function dl(){let t=new U,e=cr([{select:n=>ve(n,"accountNode")&&C(n).size===void 0,transform:(n,r)=>{p(n,"accountNode");let u=N(n.data,ri(t,{stack:r}));return u===null?n:ee({...n,size:u})}}],{keys:["rootNode","programNode","accountNode"]});return I(e,n=>G(n,t))}var pl=()=>[{account:/^(payer|feePayer)$/,defaultValue:Tr(),ignoreIfOptional:!0},{account:/^(authority)$/,defaultValue:gr(),ignoreIfOptional:!0},{account:/^(programId)$/,defaultValue:Ut(),ignoreIfOptional:!0},{account:/^(systemProgram|splSystemProgram)$/,defaultValue:x("11111111111111111111111111111111","splSystem"),ignoreIfOptional:!0},{account:/^(tokenProgram|splTokenProgram)$/,defaultValue:x("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA","splToken"),ignoreIfOptional:!0},{account:/^(ataProgram|splAtaProgram)$/,defaultValue:x("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL","splAssociatedToken"),ignoreIfOptional:!0},{account:/^(tokenMetadataProgram|mplTokenMetadataProgram)$/,defaultValue:x("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s","mplTokenMetadata"),ignoreIfOptional:!0},{account:/^(tokenAuth|mplTokenAuth|authorization|mplAuthorization|auth|mplAuth)RulesProgram$/,defaultValue:x("auth9SigNpDKz4sJJ1DfCTuZrZNSAgh9sFD3rboVmgg","mplTokenAuthRules"),ignoreIfOptional:!0},{account:/^(candyMachineProgram|mplCandyMachineProgram)$/,defaultValue:x("CndyV3LdqHUfDLmE5naZjVN8rBZz4tqhdefbAnjHG3JR","mplCandyMachine"),ignoreIfOptional:!0},{account:/^(candyGuardProgram|mplCandyGuardProgram)$/,defaultValue:x("Guard1JwRhJkVH6XZhzoYxeBVQe872VH6QggF4BWmS9g","mplCandyGuard"),ignoreIfOptional:!0},{account:/^(clockSysvar|sysvarClock)$/,defaultValue:x("SysvarC1ock11111111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(epochScheduleSysvar|sysvarEpochSchedule)$/,defaultValue:x("SysvarEpochSchedu1e111111111111111111111111"),ignoreIfOptional:!0},{account:/^(instructions?Sysvar|sysvarInstructions?)(Account)?$/,defaultValue:x("Sysvar1nstructions1111111111111111111111111"),ignoreIfOptional:!0},{account:/^(recentBlockhashesSysvar|sysvarRecentBlockhashes)$/,defaultValue:x("SysvarRecentB1ockHashes11111111111111111111"),ignoreIfOptional:!0},{account:/^(rent|rentSysvar|sysvarRent)$/,defaultValue:x("SysvarRent111111111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(rewardsSysvar|sysvarRewards)$/,defaultValue:x("SysvarRewards111111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(slotHashesSysvar|sysvarSlotHashes)$/,defaultValue:x("SysvarS1otHashes111111111111111111111111111"),ignoreIfOptional:!0},{account:/^(slotHistorySysvar|sysvarSlotHistory)$/,defaultValue:x("SysvarS1otHistory11111111111111111111111111"),ignoreIfOptional:!0},{account:/^(stakeHistorySysvar|sysvarStakeHistory)$/,defaultValue:x("SysvarStakeHistory1111111111111111111111111"),ignoreIfOptional:!0},{account:/^(mplCoreProgram)$/,defaultValue:x("CoREENxT6tW1HoK8ypY1SxRMZTcVPm7R94rH4PZNhX7d","mplCore"),ignoreIfOptional:!0}];function yl(t){let e=new U,n=new q,r=t.sort((i,s)=>{let a="instruction"in i,o="instruction"in s;return a&&o||!i&&!o?0:a?-1:1});function u(i,s){return r.find(a=>"instruction"in a&&a.instruction&&g(a.instruction)!==i.name?!1:typeof a.account=="string"?g(a.account)===s.name:a.account.test(s.name))}return I(ae({keys:["rootNode","programNode","instructionNode"]}),i=>j(i,{visitInstruction(s){let a=n.getPath("instructionNode"),o=s.accounts.map(c=>{var d;let l=u(s,c);if(!l||(d=l.ignoreIfOptional)!=null&&d&&(c.isOptional||c.defaultValue))return c;try{return{...c,defaultValue:N(l.defaultValue,si(a,e,!0))}}catch{return c}});return z({...s,accounts:o})}}),i=>B(i,n),i=>G(i,e))}function ml(t){return b(Object.entries(t).map(([e,n])=>({select:["[instructionNode]",e],transform:r=>{var i,s,a,o,c,l;p(r,"instructionNode");let u=F({defaultValue:n.value,defaultValueStrategy:(i=n.strategy)!=null?i:"omitted",docs:(s=n.docs)!=null?s:[],name:(a=n.name)!=null?a:"discriminator",type:(o=n.type)!=null?o:pe("u8")});return z({...r,arguments:[u,...r.arguments],discriminators:[rt((c=n.name)!=null?c:"discriminator"),...(l=r.discriminators)!=null?l:[]]})}})))}function Nl(t){return b(Object.entries(t).map(([e,n])=>({select:`${e}.[numberTypeNode]`,transform:r=>{switch(Q(r,"numberTypeNode"),n.kind){case"DateTime":return at(r);case"SolAmount":return ft(r);case"Amount":return it(r,n.decimals,n.unit);default:throw new V(wt,{wrapper:n})}}})))}function vl(t){return b(Object.entries(t).flatMap(([e,n])=>{let r=Object.fromEntries(Object.entries(n).map(([u,i])=>[g(u),i]));return[{select:`${e}.[structTypeNode]`,transform:u=>{p(u,"structTypeNode");let i=u.fields.map(s=>{let a=r[s.name];return a===void 0?s:a===null?Z({...s,defaultValue:void 0,defaultValueStrategy:void 0}):Z({...s,defaultValue:"kind"in a?a:a.value,defaultValueStrategy:"kind"in a?void 0:a.strategy})});return W(i)}},{select:["[instructionNode]",e],transform:u=>{p(u,"instructionNode");let i=s=>{let a=r[s.name];return a===void 0?s:a===null?F({...s,defaultValue:void 0,defaultValueStrategy:void 0}):F({...s,defaultValue:"kind"in a?a:a.value,defaultValueStrategy:"kind"in a?void 0:a.strategy})};return z({...u,arguments:u.arguments.map(i),extraArguments:u.extraArguments?u.extraArguments.map(i):void 0})}}]}))}function gl(t){return I(ae({keys:["rootNode","programNode"]}),e=>j(e,{visitProgram(n){let r=n.definedTypes.filter(s=>t.includes(s.name)),u=n.definedTypes.filter(s=>!t.includes(s.name)),i=r.map(s=>(p(s.type,"structTypeNode"),ee({...s,data:s.type,discriminators:[],size:void 0})));return J({...n,accounts:[...n.accounts,...i],definedTypes:u})}}))}function Tl(t="*"){let e=n=>y(n,"fixedCountNode")?t==="*"||t.includes(n.value):!1;return I(ae(),n=>j(n,{visitArrayType(r,{self:u}){let i=N(r.item,u);return p(i,_),y(i,"numberTypeNode")&&i.format==="u8"&&y(r.count,"fixedCountNode")&&e(r.count)?ct(nt(),r.count.value):ot(i,r.count)}}))}function ci(t="*"){let e=new U,n=new q,r=(t==="*"?[]:t).map(i=>{if(!i.includes("."))return g(i);let[s,a]=i.split(".");return`${g(s)}.${g(a)}`}),u=(i,s)=>{if(t==="*")return!0;let a=`${s}.${i}`;return s&&r.includes(a)?!0:r.includes(i)};return I(ae(),i=>j(i,{visitDefinedTypeLink(s,{self:a}){var f,m,v;let o=(v=(f=s.program)==null?void 0:f.name)!=null?v:(m=le(n.getPath()))==null?void 0:m.name;if(!u(s.name,o))return s;let c=e.getPathOrThrow(n.getPath("definedTypeLinkNode")),l=C(c);n.pushPath(c);let d=N(l.type,a);return n.popPath(),d},visitProgram(s,{self:a}){return J({...s,accounts:s.accounts.map(o=>N(o,a)).filter(lt("accountNode")),definedTypes:s.definedTypes.filter(o=>!u(o.name,s.name)).map(o=>N(o,a)).filter(lt("definedTypeNode")),instructions:s.instructions.map(o=>N(o,a)).filter(lt("instructionNode"))})}}),i=>B(i,n),i=>G(i,e))}function hl(){return Ie(t=>{let e=N(t,ui()),n=new U;N(t,lr(n));let r=Object.keys(e).filter(u=>{var i,s;return((i=e[u].total)!=null?i:0)===1&&((s=e[u].directlyAsInstructionArgs)!=null?s:0)===1}).filter(u=>{let i=u.split("."),s=i.length==2?se(i[1],i[0]):se(u),a=n.get([s]);return a&&!y(a.type,"enumTypeNode")});if(r.length>0){let u=ci(r),i=N(t,u);return p(i,"rootNode"),i}return t})}function Al(t="*"){let e=t==="*"?[()=>!0]:t.map(r=>ur(r)),n=r=>e.some(u=>u(r.getPath(P)));return Ie(r=>{let u=[],i=new Map(ln(r).map(c=>[c.name,c])),s=N(r,b([{select:"[enumTupleVariantTypeNode]",transform:(c,l)=>{if(p(c,"enumTupleVariantTypeNode"),!n(l))return c;let d=Ae(c.tuple);if(d.items.length!==1)return c;let f=d.items[0];if(y(f,"definedTypeLinkNode")){let v=i.get(f.name);if(!v||!y(v.type,"structTypeNode"))return c;u.push(f.name),f=v.type}if(!y(f,"structTypeNode"))return c;let m=me(c.tuple,()=>f);return he(c.name,m)}}]));p(s,"rootNode");let a=N(s,ui()),o=u.filter(c=>!a[c]||a[c].total===0);return s=N(s,ci(o)),p(s,"rootNode"),s})}function Vl(t){let e=new U,n=t.map(r=>({select:["[definedTypeLinkNode]",r],transform:(u,i)=>e.getOrThrow(i.getPath("definedTypeLinkNode")).type}));return I(b(n),r=>G(r,e))}function ds(t,e){return W(t.fields.map(n=>e[n.name]?Z({...n,name:e[n.name]}):n))}function Sl(t,e){return ut(t.variants.map(n=>e[n.name]?Ol(n,e[n.name]):n),{...t})}function Ol(t,e){return y(t,"enumStructVariantTypeNode")?he(e,t.struct):y(t,"enumTupleVariantTypeNode")?st(e,t.tuple):ye(e)}function El(t){return b(Object.entries(t).flatMap(([e,n])=>{let r=typeof n=="object"&&"name"in n&&n.name?g(n.name):void 0,u=[],i=[{select:["[accountNode]",e],transform:(s,a)=>{if(p(s,"accountNode"),"delete"in n)return null;let o=le(a.getPath()),{seeds:c,pda:l,...d}=n,f=s.pda;return l&&c!==void 0?(f=l,u.push({pda:ne({name:l.name,seeds:c}),program:o.name})):l?f=l:c!==void 0&&s.pda?u.push({pda:ne({name:s.pda.name,seeds:c}),program:o.name}):c!==void 0&&(f=Te(r!=null?r:s.name),u.push({pda:ne({name:r!=null?r:s.name,seeds:c}),program:o.name})),ee({...s,...d,data:me(s.data,m=>{var v;return ds(m,(v=n.data)!=null?v:{})}),pda:f})}},{select:"[programNode]",transform:s=>{p(s,"programNode");let a=u.filter(f=>f.program===s.name).map(f=>f.pda);if(a.length===0)return s;let o=new Set(s.pdas.map(f=>f.name)),c=a.filter(f=>!o.has(f.name)),l=new Map(a.filter(f=>o.has(f.name)).map(f=>[f.name,f])),d=[...s.pdas.map(f=>{var m;return(m=l.get(f.name))!=null?m:f}),...c];return J({...s,pdas:d})}}];return r&&i.push({select:["[accountLinkNode]",e],transform:s=>(p(s,"accountLinkNode"),Xe(r))},{select:["[pdaNode]",e],transform:s=>(p(s,"pdaNode"),ne({name:r,seeds:s.seeds}))},{select:["[pdaLinkNode]",e],transform:s=>(p(s,"pdaLinkNode"),Te(r))}),i}))}function bl(t){return b(Object.entries(t).flatMap(([e,n])=>{let r=typeof n=="object"&&"name"in n&&n.name?g(n.name):void 0,u=[{select:["[definedTypeNode]",e],transform:i=>{if(p(i,"definedTypeNode"),"delete"in n)return null;let{data:s,...a}=n,o=i.type;return y(i.type,"structTypeNode")?o=ds(i.type,s!=null?s:{}):y(i.type,"enumTypeNode")&&(o=Sl(i.type,s!=null?s:{})),pt({...i,...a,name:r!=null?r:i.name,type:o})}}];return r&&u.push({select:["[definedTypeLinkNode]",e],transform:i=>(p(i,"definedTypeLinkNode"),se(r))}),u}))}function Il(t){return b(Object.entries(t).map(([e,n])=>({select:`[errorNode]${e}`,transform:r=>(p(r,"errorNode"),"delete"in n?null:un({...r,...n}))})))}function _l(t){let e=new U,n=new q,r=Object.entries(t).map(([u,i])=>({select:["[instructionNode]",u],transform:s=>{if(p(s,"instructionNode"),"delete"in i)return null;let a=n.getPath("instructionNode"),{accounts:o,arguments:c,...l}=i,{newArguments:d,newExtraArguments:f}=Rl(s,c!=null?c:{}),m=s.accounts.map(v=>Dl(a,v,o!=null?o:{},e));return z({...s,...l,accounts:m,arguments:d,extraArguments:f.length>0?f:void 0})}}));return I(b(r),u=>B(u,n),u=>G(u,e))}function Dl(t,e,n,r){let u=n==null?void 0:n[e.name];if(!u)return e;let{defaultValue:i,...s}={...e,...u};return i?Ce({...s,defaultValue:N(i,si(t,r))}):Ce(s)}function Rl(t,e){var s;let n=new Set,r=t.arguments.map(a=>{var c,l,d,f,m;let o=e[a.name];return o?(n.add(a.name),F({...a,defaultValue:(c=o.defaultValue)!=null?c:a.defaultValue,defaultValueStrategy:(l=o.defaultValueStrategy)!=null?l:a.defaultValueStrategy,docs:(d=o.docs)!=null?d:a.docs,name:(f=o.name)!=null?f:a.name,type:(m=o.type)!=null?m:a.type})):a}),i=[...((s=t.extraArguments)!=null?s:[]).map(a=>{var c,l,d,f,m;if(n.has(a.name))return a;let o=e[a.name];return o?(n.add(a.name),F({...a,defaultValue:(c=o.defaultValue)!=null?c:a.defaultValue,defaultValueStrategy:(l=o.defaultValueStrategy)!=null?l:a.defaultValueStrategy,docs:(d=o.docs)!=null?d:a.docs,name:(f=o.name)!=null?f:a.name,type:(m=o.type)!=null?m:a.type})):a}),...Object.entries(e).filter(([a])=>!n.has(a)).map(([a,o])=>{var l,d,f,m;let{type:c}=o;return p(c,_),F({defaultValue:(l=o.defaultValue)!=null?l:void 0,defaultValueStrategy:(d=o.defaultValueStrategy)!=null?d:void 0,docs:(f=o.docs)!=null?f:[],name:(m=o.name)!=null?m:a,type:c})})];return{newArguments:r,newExtraArguments:i}}function kl(t){return b(Object.entries(t).flatMap(([e,n])=>{let r=typeof n=="object"&&"name"in n&&n.name?g(n.name):void 0,u=[{select:`[programNode]${e}`,transform:i=>(p(i,"programNode"),"delete"in n?null:J({...i,...n}))}];return r&&u.push({select:`[programLinkNode]${e}`,transform:i=>(p(i,"programLinkNode"),ge(r))}),u}))}function li(t){let e=t;return ps(e.version),{accept(n){return N(e,n)},clone(){return li({...e})},getJson(){return JSON.stringify(e)},getRoot(){return e},update(n){let r=N(e,n);p(r,"rootNode"),e=r}}}function Pl(t){return li(JSON.parse(t))}function ps(t){let e="1.3.7";if(t===e)return;let[n,r]=t.split(".").map(Number),[u,i]=e.split(".").map(Number);if(!(n===0&&u===0&&r===i)&&n!==u)throw new V(Dt,{codamaVersion:e,rootVersion:t})}return Ss(Cl);})();
